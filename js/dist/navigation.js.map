{"version":3,"file":"navigation.js","sources":["../src/navigation.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI navigation.js\n * Licensed under MIT (https://github.com/coreui/coreui/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport Data from './dom/data.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'navigation'\nconst DATA_KEY = 'coreui.navigation'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  activeLinksExact: true,\n  groupsAutoCollapse: true\n}\n\nconst DefaultType = {\n  activeLinksExact: 'boolean',\n  groupsAutoCollapse: '(string|boolean)'\n}\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_SHOW = 'show'\n\nconst CLASS_NAME_NAV_GROUP = 'nav-group'\nconst CLASS_NAME_NAV_GROUP_TOGGLE = 'nav-group-toggle'\n\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst SELECTOR_NAV_GROUP = '.nav-group'\nconst SELECTOR_NAV_GROUP_ITEMS = '.nav-group-items'\nconst SELECTOR_NAV_GROUP_TOGGLE = '.nav-group-toggle'\nconst SELECTOR_NAV_LINK = '.nav-link'\nconst SELECTOR_DATA_NAVIGATION = '[data-coreui=\"navigation\"]'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Navigation extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n    this._config = this._getConfig(config)\n    this._setActiveLink()\n    this._addEventListeners()\n\n    Data.set(element, DATA_KEY, this)\n  }\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    return config\n  }\n\n  _setActiveLink() {\n    for (const element of Array.from(this._element.querySelectorAll(SELECTOR_NAV_LINK))) {\n      if (element.classList.contains(CLASS_NAME_NAV_GROUP_TOGGLE)) {\n        continue\n      }\n\n      let currentUrl = String(window.location)\n\n      const urlHasParams = /\\?.*=/\n      const urlHasQueryString = /\\?./\n      const urlHasHash = /#./\n\n      if (urlHasParams.test(currentUrl) || urlHasQueryString.test(currentUrl)) {\n        currentUrl = currentUrl.split('?')[0]\n      }\n\n      if (urlHasHash.test(currentUrl)) {\n        currentUrl = currentUrl.split('#')[0]\n      }\n\n      if (this._config.activeLinksExact && element.href === currentUrl) {\n        element.classList.add(CLASS_NAME_ACTIVE)\n        // eslint-disable-next-line unicorn/no-array-for-each\n        Array.from(this._getParents(element, SELECTOR_NAV_GROUP)).forEach(element => {\n          element.classList.add(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', true)\n        })\n      }\n\n      if (!this._config.activeLinksExact && element.href.startsWith(currentUrl)) {\n        element.classList.add(CLASS_NAME_ACTIVE)\n        // eslint-disable-next-line unicorn/no-array-for-each\n        Array.from(this._getParents(element, SELECTOR_NAV_GROUP)).forEach(element => {\n          element.classList.add(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', true)\n        })\n      }\n    }\n  }\n\n  _getParents(element, selector) {\n    // Setup parents array\n    const parents = []\n\n    // Get matching parent elements\n    for (; element && element !== document; element = element.parentNode) {\n      // Add matching parents to array\n      if (selector) {\n        if (element.matches(selector)) {\n          parents.push(element)\n        }\n      } else {\n        parents.push(element)\n      }\n    }\n\n    return parents\n  }\n\n  _getAllSiblings(element, filter) {\n    const siblings = []\n    element = element.parentNode.firstChild\n    do {\n      if (element.nodeType === 3) {\n        continue // text node\n      }\n\n      if (element.nodeType === 8) {\n        continue // comment node\n      }\n\n      if (!filter || filter(element)) {\n        siblings.push(element)\n      }\n\n    // eslint-disable-next-line no-cond-assign\n    } while (element = element.nextSibling)\n\n    return siblings\n  }\n\n  _getChildren(n, skipMe) {\n    const children = []\n    for (; n; n = n.nextSibling) {\n      if (n.nodeType === 1 && n !== skipMe) {\n        children.push(n)\n      }\n    }\n\n    return children\n  }\n\n  _getSiblings(element, filter) {\n    const siblings = this._getChildren(element.parentNode.firstChild, element).filter(filter)\n    return siblings\n  }\n\n  _slideDown(element) {\n    element.style.height = 'auto'\n    const height = element.clientHeight\n    element.style.height = '0px'\n    setTimeout(() => {\n      element.style.height = `${height}px`\n    }, 0)\n\n    this._queueCallback(() => {\n      element.style.height = 'auto'\n    }, element, true)\n  }\n\n  _slideUp(element, callback) {\n    const height = element.clientHeight\n    element.style.height = `${height}px`\n    setTimeout(() => {\n      element.style.height = '0px'\n    }, 0)\n\n    this._queueCallback(() => {\n      if (typeof callback === 'function') {\n        callback()\n      }\n    }, element, true)\n  }\n\n  _toggleGroupItems(event) {\n    let toggler = event.target\n    if (!toggler.classList.contains(CLASS_NAME_NAV_GROUP_TOGGLE)) {\n      toggler = toggler.closest(SELECTOR_NAV_GROUP_TOGGLE)\n    }\n\n    const filter = element => Boolean(element.classList.contains(CLASS_NAME_NAV_GROUP) && element.classList.contains(CLASS_NAME_SHOW))\n\n    // Close other groups\n    if (this._config.groupsAutoCollapse === true) {\n      for (const element of this._getSiblings(toggler.parentNode, filter)) {\n        this._slideUp(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, element), () => {\n          element.classList.remove(CLASS_NAME_SHOW)\n          element.setAttribute('aria-expanded', false)\n        })\n      }\n    }\n\n    if (toggler.parentNode.classList.contains(CLASS_NAME_SHOW)) {\n      this._slideUp(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, toggler.parentNode), () => {\n        toggler.parentNode.classList.remove(CLASS_NAME_SHOW)\n        toggler.parentNode.setAttribute('aria-expanded', false)\n      })\n      return\n    }\n\n    toggler.parentNode.classList.add(CLASS_NAME_SHOW)\n    toggler.parentNode.setAttribute('aria-expanded', true)\n    this._slideDown(SelectorEngine.findOne(SELECTOR_NAV_GROUP_ITEMS, toggler.parentNode))\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_CLICK_DATA_API, SELECTOR_NAV_GROUP_TOGGLE, event => {\n      event.preventDefault()\n      this._toggleGroupItems(event, this)\n    })\n  }\n\n  // Static\n\n  static navigationInterface(element, config) {\n    const data = Navigation.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      Navigation.navigationInterface(this, config)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of Array.from(document.querySelectorAll(SELECTOR_DATA_NAVIGATION))) {\n    Navigation.navigationInterface(element)\n  }\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Navigation to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Navigation)\n\nexport default Navigation\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","activeLinksExact","groupsAutoCollapse","DefaultType","CLASS_NAME_ACTIVE","CLASS_NAME_SHOW","CLASS_NAME_NAV_GROUP","CLASS_NAME_NAV_GROUP_TOGGLE","EVENT_CLICK_DATA_API","EVENT_LOAD_DATA_API","SELECTOR_NAV_GROUP","SELECTOR_NAV_GROUP_ITEMS","SELECTOR_NAV_GROUP_TOGGLE","SELECTOR_NAV_LINK","SELECTOR_DATA_NAVIGATION","Navigation","BaseComponent","constructor","element","config","_config","_getConfig","_setActiveLink","_addEventListeners","Data","set","Manipulator","getDataAttributes","_element","Array","from","querySelectorAll","classList","contains","currentUrl","String","window","location","urlHasParams","urlHasQueryString","urlHasHash","test","split","href","add","_getParents","forEach","setAttribute","startsWith","selector","parents","document","parentNode","matches","push","_getAllSiblings","filter","siblings","firstChild","nodeType","nextSibling","_getChildren","n","skipMe","children","_getSiblings","_slideDown","style","height","clientHeight","setTimeout","_queueCallback","_slideUp","callback","_toggleGroupItems","event","toggler","target","closest","Boolean","SelectorEngine","findOne","remove","EventHandler","on","preventDefault","navigationInterface","data","getOrCreateInstance","TypeError","jQueryInterface","each","defineJQueryPlugin"],"mappings":"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"}