{"version":3,"sources":["../src/scrollspy.js"],"names":["jQuery","$","getSelectorFromElement","getUID","makeArray","typeCheckConfig","Data","EventHandler","Manipulator","SelectorEngine","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","PREFIX","window","CoreUIDefaults","prefix","Default","offset","method","target","DefaultType","Event","ACTIVATE","SCROLL","LOAD_DATA_API","ClassName","DROPDOWN_ITEM","ACTIVE","Selector","DATA_SPY","NAV_LIST_GROUP","NAV_LINKS","NAV_ITEMS","LIST_ITEMS","DROPDOWN","DROPDOWN_TOGGLE","OffsetMethod","OFFSET","POSITION","ScrollSpy","element","config","_element","_scrollElement","tagName","_config","_getConfig","_selector","_offsets","_targets","_activeTarget","_scrollHeight","on","event","_process","refresh","setData","autoMethod","offsetMethod","offsetBase","_getScrollTop","_getScrollHeight","targets","find","map","targetSelector","findOne","targetBCR","getBoundingClientRect","width","height","top","filter","item","sort","a","b","forEach","push","dispose","removeData","off","id","pageYOffset","scrollTop","scrollHeight","Math","max","document","body","documentElement","_getOffsetHeight","innerHeight","maxScroll","length","_activate","_clear","offsetLength","i","isActiveTarget","queries","split","selector","link","join","classList","contains","closest","add","parents","listGroup","prev","navItem","children","trigger","relatedTarget","node","remove","_jQueryInterface","each","data","getData","TypeError","_getInstance","spy","getDataAttributes","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.0.0-alpha.12): scrollspy.js\n * Licensed under MIT (https://coreui.io/license)\n *\n * This component is a modified version of the Bootstrap's scrollspy.js\n * Bootstrap (v4.3.1): scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  jQuery as $,\n  getSelectorFromElement,\n  getUID,\n  makeArray,\n  typeCheckConfig\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'scrollspy'\nconst VERSION = '3.0.0-alpha.12'\nconst DATA_KEY = 'coreui.scrollspy'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst PREFIX = window.CoreUIDefaults ? window.CoreUIDefaults.prefix ? window.CoreUIDefaults.prefix : 'c-' : 'c-'\n\nconst Default = {\n  offset: 10,\n  method: 'auto',\n  target: ''\n}\n\nconst DefaultType = {\n  offset: 'number',\n  method: 'string',\n  target: '(string|element)'\n}\n\nconst Event = {\n  ACTIVATE: `activate${EVENT_KEY}`,\n  SCROLL: `scroll${EVENT_KEY}`,\n  LOAD_DATA_API: `load${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  DROPDOWN_ITEM: `${PREFIX}dropdown-item`,\n  ACTIVE: `${PREFIX}active`\n}\n\nconst Selector = {\n  DATA_SPY: `[data-spy=\"${PREFIX}scroll\"]`,\n  NAV_LIST_GROUP: `.${PREFIX}nav, .${PREFIX}list-group`,\n  NAV_LINKS: `.${PREFIX}nav-link`,\n  NAV_ITEMS: `.${PREFIX}nav-item`,\n  LIST_ITEMS: `.${PREFIX}list-group-item`,\n  DROPDOWN: `.${PREFIX}dropdown`,\n  DROPDOWN_TOGGLE: `.${PREFIX}dropdown-toggle`\n}\n\nconst OffsetMethod = {\n  OFFSET: 'offset',\n  POSITION: 'position'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ScrollSpy {\n  constructor(element, config) {\n    this._element = element\n    this._scrollElement = element.tagName === 'BODY' ? window : element\n    this._config = this._getConfig(config)\n    this._selector = `${this._config.target} ${Selector.NAV_LINKS},` +\n                          `${this._config.target} ${Selector.LIST_ITEMS},` +\n                          `${this._config.target} .${ClassName.DROPDOWN_ITEM}`\n    this._offsets = []\n    this._targets = []\n    this._activeTarget = null\n    this._scrollHeight = 0\n\n    EventHandler.on(this._scrollElement, Event.SCROLL, event => this._process(event))\n\n    this.refresh()\n    this._process()\n\n    Data.setData(element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  // Public\n\n  refresh() {\n    const autoMethod = this._scrollElement === this._scrollElement.window ?\n      OffsetMethod.OFFSET :\n      OffsetMethod.POSITION\n\n    const offsetMethod = this._config.method === 'auto' ?\n      autoMethod :\n      this._config.method\n\n    const offsetBase = offsetMethod === OffsetMethod.POSITION ?\n      this._getScrollTop() :\n      0\n\n    this._offsets = []\n    this._targets = []\n\n    this._scrollHeight = this._getScrollHeight()\n\n    const targets = makeArray(SelectorEngine.find(this._selector))\n\n    targets\n      .map(element => {\n        let target\n        const targetSelector = getSelectorFromElement(element)\n\n        if (targetSelector) {\n          target = SelectorEngine.findOne(targetSelector)\n        }\n\n        if (target) {\n          const targetBCR = target.getBoundingClientRect()\n          if (targetBCR.width || targetBCR.height) {\n            return [\n              Manipulator[offsetMethod](target).top + offsetBase,\n              targetSelector\n            ]\n          }\n        }\n\n        return null\n      })\n      .filter(item => item)\n      .sort((a, b) => a[0] - b[0])\n      .forEach(item => {\n        this._offsets.push(item[0])\n        this._targets.push(item[1])\n      })\n  }\n\n  dispose() {\n    Data.removeData(this._element, DATA_KEY)\n    EventHandler.off(this._scrollElement, EVENT_KEY)\n\n    this._element = null\n    this._scrollElement = null\n    this._config = null\n    this._selector = null\n    this._offsets = null\n    this._targets = null\n    this._activeTarget = null\n    this._scrollHeight = null\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...typeof config === 'object' && config ? config : {}\n    }\n\n    if (typeof config.target !== 'string') {\n      let { id } = config.target\n      if (!id) {\n        id = getUID(NAME)\n        config.target.id = id\n      }\n\n      config.target = `#${id}`\n    }\n\n    typeCheckConfig(NAME, config, DefaultType)\n\n    return config\n  }\n\n  _getScrollTop() {\n    return this._scrollElement === window ?\n      this._scrollElement.pageYOffset :\n      this._scrollElement.scrollTop\n  }\n\n  _getScrollHeight() {\n    return this._scrollElement.scrollHeight || Math.max(\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight\n    )\n  }\n\n  _getOffsetHeight() {\n    return this._scrollElement === window ?\n      window.innerHeight :\n      this._scrollElement.getBoundingClientRect().height\n  }\n\n  _process() {\n    const scrollTop = this._getScrollTop() + this._config.offset\n    const scrollHeight = this._getScrollHeight()\n    const maxScroll = this._config.offset +\n      scrollHeight -\n      this._getOffsetHeight()\n\n    if (this._scrollHeight !== scrollHeight) {\n      this.refresh()\n    }\n\n    if (scrollTop >= maxScroll) {\n      const target = this._targets[this._targets.length - 1]\n\n      if (this._activeTarget !== target) {\n        this._activate(target)\n      }\n\n      return\n    }\n\n    if (this._activeTarget && scrollTop < this._offsets[0] && this._offsets[0] > 0) {\n      this._activeTarget = null\n      this._clear()\n      return\n    }\n\n    const offsetLength = this._offsets.length\n    for (let i = offsetLength; i--;) {\n      const isActiveTarget = this._activeTarget !== this._targets[i] &&\n          scrollTop >= this._offsets[i] &&\n          (typeof this._offsets[i + 1] === 'undefined' ||\n              scrollTop < this._offsets[i + 1])\n\n      if (isActiveTarget) {\n        this._activate(this._targets[i])\n      }\n    }\n  }\n\n  _activate(target) {\n    this._activeTarget = target\n\n    this._clear()\n\n    const queries = this._selector.split(',')\n      .map(selector => `${selector}[data-target=\"${target}\"],${selector}[href=\"${target}\"]`)\n\n    const link = SelectorEngine.findOne(queries.join(','))\n\n    if (link.classList.contains(ClassName.DROPDOWN_ITEM)) {\n      SelectorEngine\n        .findOne(Selector.DROPDOWN_TOGGLE, SelectorEngine.closest(link, Selector.DROPDOWN))\n        .classList.add(ClassName.ACTIVE)\n\n      link.classList.add(ClassName.ACTIVE)\n    } else {\n      // Set triggered link as active\n      link.classList.add(ClassName.ACTIVE)\n\n      SelectorEngine\n        .parents(link, Selector.NAV_LIST_GROUP)\n        .forEach(listGroup => {\n          // Set triggered links parents as active\n          // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n          SelectorEngine.prev(listGroup, `${Selector.NAV_LINKS}, ${Selector.LIST_ITEMS}`)\n            .forEach(item => item.classList.add(ClassName.ACTIVE))\n\n          // Handle special case when .nav-link is inside .nav-item\n          SelectorEngine.prev(listGroup, Selector.NAV_ITEMS)\n            .forEach(navItem => {\n              SelectorEngine.children(navItem, Selector.NAV_LINKS)\n                .forEach(item => item.classList.add(ClassName.ACTIVE))\n            })\n        })\n    }\n\n    EventHandler.trigger(this._scrollElement, Event.ACTIVATE, {\n      relatedTarget: target\n    })\n  }\n\n  _clear() {\n    makeArray(SelectorEngine.find(this._selector))\n      .filter(node => node.classList.contains(ClassName.ACTIVE))\n      .forEach(node => node.classList.remove(ClassName.ACTIVE))\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = Data.getData(this, DATA_KEY)\n      const _config = typeof config === 'object' && config\n\n      if (!data) {\n        data = new ScrollSpy(this, _config)\n      }\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n\n  static _getInstance(element) {\n    return Data.getData(element, DATA_KEY)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(window, Event.LOAD_DATA_API, () => {\n  makeArray(SelectorEngine.find(Selector.DATA_SPY))\n    .forEach(spy => new ScrollSpy(spy, Manipulator.getDataAttributes(spy)))\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\nif (typeof $ !== 'undefined') {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME] = ScrollSpy._jQueryInterface\n  $.fn[NAME].Constructor = ScrollSpy\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return ScrollSpy._jQueryInterface\n  }\n}\n\nexport default ScrollSpy\n"],"file":"scrollspy.js"}