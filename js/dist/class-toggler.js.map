{"version":3,"file":"class-toggler.js","sources":["../src/util/index.js","../src/class-toggler.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.3.1): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nconst toType = obj => ({}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase())\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += ~~(Math.random() * MAX_UID) // \"~~\" acts like a faster Math.floor() here\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-target')\n\n  if (!selector || selector === '#') {\n    const hrefAttr = element.getAttribute('href')\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = parseFloat(transitionDuration)\n  const floatTransitionDelay = parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  const evt = document.createEvent('HTMLEvents')\n\n  evt.initEvent(TRANSITION_END, true, true)\n  element.dispatchEvent(evt)\n}\n\nconst isElement = obj => (obj[0] || obj).nodeType\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener() {\n    called = true\n    element.removeEventListener(TRANSITION_END, listener)\n  }\n\n  element.addEventListener(TRANSITION_END, listener)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(element)\n    }\n  }, emulatedDuration)\n}\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes)\n    .forEach(property => {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = value && isElement(value) ?\n        'element' :\n        toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new Error(\n          `${componentName.toUpperCase()}: ` +\n          `Option \"${property}\" provided type \"${valueType}\" ` +\n          `but expected type \"${expectedTypes}\".`)\n      }\n    })\n}\n\nconst makeArray = nodeList => {\n  if (!nodeList) {\n    return []\n  }\n\n  return [].slice.call(nodeList)\n}\n\nconst isVisible = element => {\n  if (!element) {\n    return false\n  }\n\n  if (element.style && element.parentNode && element.parentNode.style) {\n    const elementStyle = getComputedStyle(element)\n    const parentNodeStyle = getComputedStyle(element.parentNode)\n\n    return elementStyle.display !== 'none' &&\n      parentNodeStyle.display !== 'none' &&\n      elementStyle.visibility !== 'hidden'\n  }\n\n  return false\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => function () {}\n\nconst reflow = element => element.offsetHeight\n\nconst getjQuery = () => {\n  const { jQuery } = window\n\n  if (jQuery && !document.body.hasAttribute('data-no-jquery')) {\n    return jQuery\n  }\n\n  return null\n}\n\nexport {\n  getjQuery,\n  TRANSITION_END,\n  getUID,\n  getSelectorFromElement,\n  getElementFromSelector,\n  getTransitionDurationFromElement,\n  triggerTransitionEnd,\n  isElement,\n  emulateTransitionEnd,\n  typeCheckConfig,\n  makeArray,\n  isVisible,\n  findShadowRoot,\n  noop,\n  reflow\n}\n","/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.0.0-rc.0): class-toggler.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  getjQuery\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'class-toggler'\nconst VERSION = '3.0.0-rc.0'\nconst DATA_KEY = 'coreui.class-toggler'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  breakpoints: '-sm,-md,-lg,-xl',\n  postfix: '-show',\n  responsive: false,\n  target: 'body'\n}\n\nconst ClassName = {\n  CLASS_TOGGLER: 'c-class-toggler'\n}\n\nconst Event = {\n  CLASS_TOGGLE: 'classtoggle',\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst Selector = {\n  CLASS_TOGGLER: '.c-class-toggler'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ClassToggler {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n  toggle() {\n    this._getElementDataAttributes(this._element).forEach(dataAttributes => {\n      let element\n      const { target, toggle } = dataAttributes\n      if (target === '_parent' || target === 'parent') {\n        element = this._element.parentNode\n      } else {\n        element = document.querySelector(target)\n      }\n\n      toggle.forEach(object => {\n        const { className, responsive, postfix } = object\n        const breakpoints = (typeof object.breakpoints === 'undefined' || object.breakpoints === null) ? null : this._arrayFromString(object.breakpoints)\n\n        // eslint-disable-next-line no-negated-condition\n        if (!responsive) {\n          element.classList.toggle(className)\n          const event = new CustomEvent(Event.CLASS_TOGGLE, {\n            detail: {\n              target,\n              className\n            }\n          })\n          element.dispatchEvent(event)\n        } else {\n          let currentBreakpoint\n          breakpoints.forEach(breakpoint => {\n            if (className.includes(breakpoint)) {\n              currentBreakpoint = breakpoint\n            }\n          })\n          const responsiveClassNames = []\n          if (typeof currentBreakpoint === 'undefined') {\n            responsiveClassNames.push(className)\n          } else {\n            responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, postfix))\n            breakpoints.splice(0, breakpoints.indexOf(currentBreakpoint) + 1).forEach(breakpoint => {\n              responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, `${breakpoint}${postfix}`))\n            })\n          }\n\n          let addResponsiveClasses = false\n          responsiveClassNames.forEach(responsiveClassName => {\n            if (element.classList.contains(responsiveClassName)) {\n              addResponsiveClasses = true\n            }\n          })\n\n          if (addResponsiveClasses) {\n            responsiveClassNames.forEach(responsiveClassName => {\n              element.classList.remove(responsiveClassName)\n              const event = new CustomEvent(Event.CLASS_TOGGLE, {\n                detail: {\n                  target,\n                  className: responsiveClassName\n                }\n              })\n              element.dispatchEvent(event)\n            })\n          } else {\n            element.classList.add(className)\n            const event = new CustomEvent(Event.CLASS_TOGGLE, {\n              detail: {\n                target,\n                className\n              }\n            })\n            element.dispatchEvent(event)\n          }\n        }\n      })\n    })\n  }\n\n  // Private\n\n  _arrayFromString(string) {\n    return string.replace(/ /g, '').split(',')\n  }\n\n  _isArray(array) {\n    try {\n      JSON.parse(array.replace(/'/g, '\"'))\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  _convertToArray(array) {\n    return JSON.parse(array.replace(/'/g, '\"'))\n  }\n\n  _getDataAttributes(data, attribute) {\n    const dataAttribute = data[attribute]\n    return this._isArray(dataAttribute) ? this._convertToArray(dataAttribute) : dataAttribute\n  }\n\n  _getToggleDetails(classNames, responsive, breakpoints, postfix) {\n    class ToggleDetails {\n      // eslint-disable-next-line default-param-last\n      constructor(className, responsive = Default.responsive, breakpoints, postfix) {\n        this.className = className\n        this.responsive = responsive\n        this.breakpoints = breakpoints\n        this.postfix = postfix\n      }\n    }\n\n    const toggle = []\n\n    if (Array.isArray(classNames)) {\n      classNames.forEach((className, index) => {\n        responsive = Array.isArray(responsive) ? responsive[index] : responsive\n        breakpoints = responsive ? (Array.isArray(breakpoints) ? breakpoints[index] : breakpoints) : null\n        postfix = responsive ? (Array.isArray(postfix) ? postfix[index] : postfix) : null\n        toggle.push(new ToggleDetails(className, responsive, breakpoints, postfix))\n      })\n    } else {\n      breakpoints = responsive ? breakpoints : null\n      postfix = responsive ? postfix : null\n      toggle.push(new ToggleDetails(classNames, responsive, breakpoints, postfix))\n    }\n\n    return toggle\n  }\n\n  _ifArray(array, index) {\n    return Array.isArray(array) ? array[index] : array\n  }\n\n  _getElementDataAttributes(element) {\n    const data = element.dataset\n    const targets = (typeof data.target === 'undefined') ? Default.target : this._getDataAttributes(data, 'target')\n    const classNames = (typeof data.class === 'undefined') ? 'undefined' : this._getDataAttributes(data, 'class')\n    const responsive = (typeof data.responsive === 'undefined') ? Default.responsive : this._getDataAttributes(data, 'responsive')\n    const breakpoints = (typeof data.breakpoints === 'undefined') ? Default.breakpoints : this._getDataAttributes(data, 'breakpoints')\n    const postfix = (typeof data.postfix === 'undefined') ? Default.postfix : this._getDataAttributes(data, 'postfix')\n\n    const toggle = []\n\n    class TargetDetails {\n      constructor(target, toggle) {\n        this.target = target\n        this.toggle = toggle\n      }\n    }\n\n    if (Array.isArray(targets)) {\n      targets.forEach((target, index) => {\n        toggle.push(new TargetDetails(target, this._getToggleDetails(this._ifArray(classNames, index), this._ifArray(responsive, index), this._ifArray(breakpoints, index), this._ifArray(postfix, index))))\n      })\n    } else {\n      toggle.push(new TargetDetails(targets, this._getToggleDetails(classNames, responsive, breakpoints, postfix)))\n    }\n\n    return toggle\n  }\n\n  // Static\n\n  static _classTogglerInterface(element, config) {\n    let data = Data.getData(element, DATA_KEY)\n    const _config = typeof config === 'object' && config\n\n    if (!data) {\n      data = new ClassToggler(element, _config)\n    }\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      ClassToggler._classTogglerInterface(this, config)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(document, Event.CLICK_DATA_API, Selector.CLASS_TOGGLER, event => {\n  event.preventDefault()\n  let toggler = event.target\n  if (!toggler.classList.contains(ClassName.CLASS_TOGGLER)) {\n    toggler = toggler.closest(Selector.CLASS_TOGGLER)\n  }\n\n  ClassToggler._classTogglerInterface(toggler, 'toggle')\n})\n\nconst $ = getjQuery()\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .c-class-toggler to jQuery only if jQuery is present\n */\n\nif ($) {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME] = ClassToggler.jQueryInterface\n  $.fn[NAME].Constructor = ClassToggler\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return ClassToggler.jQueryInterface\n  }\n}\n\nexport default ClassToggler\n"],"names":["getjQuery","window","jQuery","document","body","hasAttribute","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","breakpoints","postfix","responsive","target","ClassName","CLASS_TOGGLER","Event","CLASS_TOGGLE","CLICK_DATA_API","Selector","ClassToggler","element","_element","toggle","_getElementDataAttributes","forEach","dataAttributes","parentNode","querySelector","object","className","_arrayFromString","classList","event","CustomEvent","detail","dispatchEvent","currentBreakpoint","breakpoint","includes","responsiveClassNames","push","replace","splice","indexOf","addResponsiveClasses","responsiveClassName","contains","remove","add","string","split","_isArray","array","JSON","parse","_convertToArray","_getDataAttributes","data","attribute","dataAttribute","_getToggleDetails","classNames","ToggleDetails","Array","isArray","index","_ifArray","dataset","targets","class","TargetDetails","_classTogglerInterface","config","Data","getData","_config","TypeError","jQueryInterface","each","EventHandler","on","preventDefault","toggler","closest","$","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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"}