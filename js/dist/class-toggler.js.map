{"version":3,"file":"class-toggler.js","sources":["../src/util/index.js","../src/class-toggler.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.0.0-alpha1): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nconst toType = obj => {\n  if (obj === null || obj === undefined) {\n    return `${obj}`\n  }\n\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID)\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-target')\n\n  if (!selector || selector === '#') {\n    const hrefAttr = element.getAttribute('href')\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let {\n    transitionDuration,\n    transitionDelay\n  } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = parseFloat(transitionDuration)\n  const floatTransitionDelay = parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (parseFloat(transitionDuration) + parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END))\n}\n\nconst isElement = obj => (obj[0] || obj).nodeType\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener() {\n    called = true\n    element.removeEventListener(TRANSITION_END, listener)\n  }\n\n  element.addEventListener(TRANSITION_END, listener)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(element)\n    }\n  }, emulatedDuration)\n}\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes)\n    .forEach(property => {\n      const expectedTypes = configTypes[property]\n      const value = config[property]\n      const valueType = value && isElement(value) ?\n        'element' :\n        toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new Error(\n          `${componentName.toUpperCase()}: ` +\n          `Option \"${property}\" provided type \"${valueType}\" ` +\n          `but expected type \"${expectedTypes}\".`)\n      }\n    })\n}\n\nconst isVisible = element => {\n  if (!element) {\n    return false\n  }\n\n  if (element.style && element.parentNode && element.parentNode.style) {\n    const elementStyle = getComputedStyle(element)\n    const parentNodeStyle = getComputedStyle(element.parentNode)\n\n    return elementStyle.display !== 'none' &&\n      parentNodeStyle.display !== 'none' &&\n      elementStyle.visibility !== 'hidden'\n  }\n\n  return false\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => function () {}\n\nconst reflow = element => element.offsetHeight\n\nconst getjQuery = () => {\n  const { jQuery } = window\n\n  if (jQuery && !document.body.hasAttribute('data-no-jquery')) {\n    return jQuery\n  }\n\n  return null\n}\n\nexport {\n  getjQuery,\n  TRANSITION_END,\n  getUID,\n  getSelectorFromElement,\n  getElementFromSelector,\n  getTransitionDurationFromElement,\n  triggerTransitionEnd,\n  isElement,\n  emulateTransitionEnd,\n  typeCheckConfig,\n  isVisible,\n  findShadowRoot,\n  noop,\n  reflow\n}\n","/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.2.0): class-toggler.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  getjQuery\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'class-toggler'\nconst VERSION = '3.2.0'\nconst DATA_KEY = 'coreui.class-toggler'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst Default = {\n  breakpoints: '-sm,-md,-lg,-xl',\n  postfix: '-show',\n  responsive: false,\n  target: 'body'\n}\n\nconst CLASS_NAME_CLASS_TOGGLER = 'c-class-toggler'\n\nconst EVENT_CLASS_TOGGLE = 'classtoggle'\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst SELECTOR_CLASS_TOGGLER = '.c-class-toggler'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass ClassToggler {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n  toggle() {\n    this._getElementDataAttributes(this._element).forEach(dataAttributes => {\n      let element\n      const { target, toggle } = dataAttributes\n      if (target === '_parent' || target === 'parent') {\n        element = this._element.parentNode\n      } else {\n        element = document.querySelector(target)\n      }\n\n      toggle.forEach(object => {\n        const { className, responsive, postfix } = object\n        const breakpoints = (typeof object.breakpoints === 'undefined' || object.breakpoints === null) ? null : this._arrayFromString(object.breakpoints)\n\n        // eslint-disable-next-line no-negated-condition\n        if (!responsive) {\n          const add = element.classList.toggle(className)\n          const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\n            detail: {\n              target,\n              add,\n              className\n            }\n          })\n          element.dispatchEvent(event)\n        } else {\n          let currentBreakpoint\n          breakpoints.forEach(breakpoint => {\n            if (className.includes(breakpoint)) {\n              currentBreakpoint = breakpoint\n            }\n          })\n          const responsiveClassNames = []\n          if (typeof currentBreakpoint === 'undefined') {\n            responsiveClassNames.push(className)\n          } else {\n            responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, postfix))\n            breakpoints.splice(0, breakpoints.indexOf(currentBreakpoint) + 1).forEach(breakpoint => {\n              responsiveClassNames.push(className.replace(`${currentBreakpoint}${postfix}`, `${breakpoint}${postfix}`))\n            })\n          }\n\n          let addResponsiveClasses = false\n          responsiveClassNames.forEach(responsiveClassName => {\n            if (element.classList.contains(responsiveClassName)) {\n              addResponsiveClasses = true\n            }\n          })\n\n          if (addResponsiveClasses) {\n            responsiveClassNames.forEach(responsiveClassName => {\n              element.classList.remove(responsiveClassName)\n              const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\n                detail: {\n                  target,\n                  add: false,\n                  className: responsiveClassName\n                }\n              })\n              element.dispatchEvent(event)\n            })\n          } else {\n            element.classList.add(className)\n            const event = new CustomEvent(EVENT_CLASS_TOGGLE, {\n              detail: {\n                target,\n                add: true,\n                className\n              }\n            })\n            element.dispatchEvent(event)\n          }\n        }\n      })\n    })\n  }\n\n  // Private\n\n  _arrayFromString(string) {\n    return string.replace(/ /g, '').split(',')\n  }\n\n  _isArray(array) {\n    try {\n      JSON.parse(array.replace(/'/g, '\"'))\n      return true\n    } catch {\n      return false\n    }\n  }\n\n  _convertToArray(array) {\n    return JSON.parse(array.replace(/'/g, '\"'))\n  }\n\n  _getDataAttributes(data, attribute) {\n    const dataAttribute = data[attribute]\n    return this._isArray(dataAttribute) ? this._convertToArray(dataAttribute) : dataAttribute\n  }\n\n  _getToggleDetails(classNames, responsive, breakpoints, postfix) {\n    class ToggleDetails {\n      // eslint-disable-next-line default-param-last\n      constructor(className, responsive = Default.responsive, breakpoints, postfix) {\n        this.className = className\n        this.responsive = responsive\n        this.breakpoints = breakpoints\n        this.postfix = postfix\n      }\n    }\n\n    const toggle = []\n\n    if (Array.isArray(classNames)) {\n      classNames.forEach((className, index) => {\n        responsive = Array.isArray(responsive) ? responsive[index] : responsive\n        breakpoints = responsive ? (Array.isArray(breakpoints) ? breakpoints[index] : breakpoints) : null\n        postfix = responsive ? (Array.isArray(postfix) ? postfix[index] : postfix) : null\n        toggle.push(new ToggleDetails(className, responsive, breakpoints, postfix))\n      })\n    } else {\n      breakpoints = responsive ? breakpoints : null\n      postfix = responsive ? postfix : null\n      toggle.push(new ToggleDetails(classNames, responsive, breakpoints, postfix))\n    }\n\n    return toggle\n  }\n\n  _ifArray(array, index) {\n    return Array.isArray(array) ? array[index] : array\n  }\n\n  _getElementDataAttributes(element) {\n    const data = element.dataset\n    const targets = (typeof data.target === 'undefined') ? Default.target : this._getDataAttributes(data, 'target')\n    const classNames = (typeof data.class === 'undefined') ? 'undefined' : this._getDataAttributes(data, 'class')\n    const responsive = (typeof data.responsive === 'undefined') ? Default.responsive : this._getDataAttributes(data, 'responsive')\n    const breakpoints = (typeof data.breakpoints === 'undefined') ? Default.breakpoints : this._getDataAttributes(data, 'breakpoints')\n    const postfix = (typeof data.postfix === 'undefined') ? Default.postfix : this._getDataAttributes(data, 'postfix')\n\n    const toggle = []\n\n    class TargetDetails {\n      constructor(target, toggle) {\n        this.target = target\n        this.toggle = toggle\n      }\n    }\n\n    if (Array.isArray(targets)) {\n      targets.forEach((target, index) => {\n        toggle.push(new TargetDetails(target, this._getToggleDetails(this._ifArray(classNames, index), this._ifArray(responsive, index), this._ifArray(breakpoints, index), this._ifArray(postfix, index))))\n      })\n    } else {\n      toggle.push(new TargetDetails(targets, this._getToggleDetails(classNames, responsive, breakpoints, postfix)))\n    }\n\n    return toggle\n  }\n\n  // Static\n\n  static _classTogglerInterface(element, config) {\n    let data = Data.getData(element, DATA_KEY)\n    const _config = typeof config === 'object' && config\n\n    if (!data) {\n      data = new ClassToggler(element, _config)\n    }\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      ClassToggler._classTogglerInterface(this, config)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_CLASS_TOGGLER, event => {\n  event.preventDefault()\n  let toggler = event.target\n  if (!toggler.classList.contains(CLASS_NAME_CLASS_TOGGLER)) {\n    toggler = toggler.closest(SELECTOR_CLASS_TOGGLER)\n  }\n\n  ClassToggler._classTogglerInterface(toggler, 'toggle')\n})\n\nconst $ = getjQuery()\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .c-class-toggler to jQuery only if jQuery is present\n */\n\nif ($) {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME] = ClassToggler.jQueryInterface\n  $.fn[NAME].Constructor = ClassToggler\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return ClassToggler.jQueryInterface\n  }\n}\n\nexport default ClassToggler\n"],"names":["getjQuery","window","jQuery","document","body","hasAttribute","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","Default","breakpoints","postfix","responsive","target","CLASS_NAME_CLASS_TOGGLER","EVENT_CLASS_TOGGLE","EVENT_CLICK_DATA_API","SELECTOR_CLASS_TOGGLER","ClassToggler","element","_element","toggle","_getElementDataAttributes","forEach","dataAttributes","parentNode","querySelector","object","className","_arrayFromString","add","classList","event","CustomEvent","detail","dispatchEvent","currentBreakpoint","breakpoint","includes","responsiveClassNames","push","replace","splice","indexOf","addResponsiveClasses","responsiveClassName","contains","remove","string","split","_isArray","array","JSON","parse","_convertToArray","_getDataAttributes","data","attribute","dataAttribute","_getToggleDetails","classNames","ToggleDetails","Array","isArray","index","_ifArray","dataset","targets","class","TargetDetails","_classTogglerInterface","config","Data","getData","_config","TypeError","jQueryInterface","each","EventHandler","on","preventDefault","toggler","closest","$","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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"}