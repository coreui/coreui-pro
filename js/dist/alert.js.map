{"version":3,"sources":["../src/alert.js"],"names":["jQuery","$","TRANSITION_END","emulateTransitionEnd","getSelectorFromElement","getTransitionDurationFromElement","Data","EventHandler","SelectorEngine","NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","PREFIX","window","CoreUIDefaults","prefix","Selector","DISMISS","Event","CLOSE","CLOSED","CLICK_DATA_API","ClassName","ALERT","FADE","SHOW","Alert","element","_element","setData","close","rootElement","_getRootElement","customEvent","_triggerCloseEvent","defaultPrevented","_removeElement","dispose","removeData","selector","parent","findOne","closest","trigger","classList","remove","contains","_destroyElement","transitionDuration","one","event","parentNode","removeChild","_jQueryInterface","config","each","data","getData","_handleDismiss","alertInstance","preventDefault","_getInstance","on","document","JQUERY_NO_CONFLICT","fn","Constructor","noConflict"],"mappings":"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","sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI (v3.0.0-alpha.12): alerj.js\n * Licensed under MIT (https://coreui.io/license)\n *\n * This component is a modified version of the Bootstrap's alert.js\n * Bootstrap (v4.3.1): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  jQuery as $,\n  TRANSITION_END,\n  emulateTransitionEnd,\n  getSelectorFromElement,\n  getTransitionDurationFromElement\n} from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport SelectorEngine from './dom/selector-engine'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'alert'\nconst VERSION = '3.0.0-alpha.12'\nconst DATA_KEY = 'coreui.alert'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst PREFIX = window.CoreUIDefaults ? window.CoreUIDefaults.prefix ? window.CoreUIDefaults.prefix : 'c-' : 'c-'\n\nconst Selector = {\n  DISMISS: '[data-dismiss=\"alert\"]'\n}\n\nconst Event = {\n  CLOSE: `close${EVENT_KEY}`,\n  CLOSED: `closed${EVENT_KEY}`,\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  ALERT: `${PREFIX}alert`,\n  FADE: `${PREFIX}fade`,\n  SHOW: `${PREFIX}show`\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert {\n  constructor(element) {\n    this._element = element\n    if (this._element) {\n      Data.setData(element, DATA_KEY, this)\n    }\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  close(element) {\n    let rootElement = this._element\n    if (element) {\n      rootElement = this._getRootElement(element)\n    }\n\n    const customEvent = this._triggerCloseEvent(rootElement)\n\n    if (customEvent === null || customEvent.defaultPrevented) {\n      return\n    }\n\n    this._removeElement(rootElement)\n  }\n\n  dispose() {\n    Data.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _getRootElement(element) {\n    const selector = getSelectorFromElement(element)\n    let parent = false\n\n    if (selector) {\n      parent = SelectorEngine.findOne(selector)\n    }\n\n    if (!parent) {\n      parent = SelectorEngine.closest(element, `.${ClassName.ALERT}`)\n    }\n\n    return parent\n  }\n\n  _triggerCloseEvent(element) {\n    return EventHandler.trigger(element, Event.CLOSE)\n  }\n\n  _removeElement(element) {\n    element.classList.remove(ClassName.SHOW)\n\n    if (!element.classList.contains(ClassName.FADE)) {\n      this._destroyElement(element)\n      return\n    }\n\n    const transitionDuration = getTransitionDurationFromElement(element)\n\n    EventHandler\n      .one(element, TRANSITION_END, event => this._destroyElement(element, event))\n    emulateTransitionEnd(element, transitionDuration)\n  }\n\n  _destroyElement(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element)\n    }\n\n    EventHandler.trigger(element, Event.CLOSED)\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = Data.getData(this, DATA_KEY)\n\n      if (!data) {\n        data = new Alert(this)\n      }\n\n      if (config === 'close') {\n        data[config](this)\n      }\n    })\n  }\n\n  static _handleDismiss(alertInstance) {\n    return function (event) {\n      if (event) {\n        event.preventDefault()\n      }\n\n      alertInstance.close(this)\n    }\n  }\n\n  static _getInstance(element) {\n    return Data.getData(element, DATA_KEY)\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler\n  .on(document, Event.CLICK_DATA_API, Selector.DISMISS, Alert._handleDismiss(new Alert()))\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .alert to jQuery only if jQuery is present\n */\n\nif (typeof $ !== 'undefined') {\n  const JQUERY_NO_CONFLICT = $.fn[NAME]\n  $.fn[NAME] = Alert._jQueryInterface\n  $.fn[NAME].Constructor = Alert\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return Alert._jQueryInterface\n  }\n}\n\nexport default Alert\n"],"file":"alert.js"}