{"version":3,"file":"multi-select-new.js","sources":["../src/multi-select-new.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO (v4.5.0): multi-select.js\n * License (https://coreui.io/pro/license-new/)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport { defineJQueryPlugin, isRTL } from './util/index'\nimport Data from './dom/data'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport BaseComponent from './base-component'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'multi-select-new'\nconst DATA_KEY = 'coreui.multi-select-new'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst SELECTOR_CLEANER = '.form-multi-select-new-cleaner'\nconst SELECTOR_OPTGROUP = '.form-multi-select-new-optgroup'\nconst SELECTOR_OPTION = '.form-multi-select-new-option'\nconst SELECTOR_OPTIONS = '.form-multi-select-new-options'\nconst SELECTOR_OPTIONS_EMPTY = '.form-multi-select-new-options-empty'\nconst SELECTOR_SEARCH = '.form-multi-select-new-search'\nconst SELECTOR_SELECT = '.form-multi-select-new'\nconst SELECTOR_SELECTION = '.form-multi-select-new-selection'\n\nconst EVENT_CHANGED = `changed${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\nconst EVENT_SEARCH = `search${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CLEANER = 'form-multi-select-new-cleaner'\nconst CLASS_NAME_DISABLED = 'disabled'\nconst CLASS_NAME_LABEL = 'label'\nconst CLASS_NAME_SELECT = 'form-multi-select-new'\nconst CLASS_NAME_SELECT_DROPDOWN = 'form-multi-select-new-dropdown'\nconst CLASS_NAME_SELECT_ALL = 'form-multi-select-new-all'\nconst CLASS_NAME_OPTGROUP = 'form-multi-select-new-optgroup'\nconst CLASS_NAME_OPTGROUP_LABEL = 'form-multi-select-new-optgroup-label'\nconst CLASS_NAME_OPTION = 'form-multi-select-new-option'\nconst CLASS_NAME_OPTION_WITH_CHECKBOX = 'form-multi-select-new-option-with-checkbox'\nconst CLASS_NAME_OPTIONS = 'form-multi-select-new-options'\nconst CLASS_NAME_OPTIONS_EMPTY = 'form-multi-select-new-options-empty'\nconst CLASS_NAME_SEARCH = 'form-multi-select-new-search'\nconst CLASS_NAME_SELECTED = 'form-multi-selected'\nconst CLASS_NAME_SELECTION = 'form-multi-select-new-selection'\nconst CLASS_NAME_SELECTION_TAGS = 'form-multi-select-new-selection-tags'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_TAG = 'form-multi-select-new-tag'\nconst CLASS_NAME_TAG_DELETE = 'form-multi-select-new-tag-delete'\nconst CLASS_NAME_TOGGLER = 'form-multi-select-new-toggler'\n\nconst Default = {\n  cleaner: true,\n  disabled: false,\n  invalid: false,\n  multiple: true,\n  placeholder: 'Select...',\n  required: false,\n  options: false,\n  optionsMaxHeight: 'auto',\n  optionsStyle: 'checkbox',\n  search: false,\n  searchNoResultsLabel: 'No results found',\n  selectAll: true,\n  selectAllLabel: 'Select all options',\n  selectionType: 'tags',\n  selectionTypeCounterText: 'item(s) selected',\n  valid: false\n}\n\nconst DefaultType = {\n  cleaner: 'boolean',\n  disabled: 'boolean',\n  invalid: 'boolean',\n  multiple: 'boolean',\n  placeholder: 'string',\n  required: 'boolean',\n  options: '(boolean|array)',\n  optionsMaxHeight: '(number|string)',\n  optionsStyle: 'string',\n  search: 'boolean',\n  searchNoResultsLabel: 'string',\n  selectAll: 'boolean',\n  selectAllLabel: 'string',\n  selectionType: 'string',\n  selectionTypeCounterText: 'string',\n  valid: 'boolean'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass MultiSelectNew extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._indicatorElement = null\n    this._selectAllElement = null\n    this._selectionElement = null\n    this._selectionCleanerElement = null\n    this._searchElement = null\n    this._togglerElement = null\n    this._optionsElement = null\n\n    this._clone = null\n    this._menu = null\n    this._options = this._getOptions()\n    this._popper = null\n    this._search = ''\n    this._selection = this._getSelectedOptions(this._options)\n\n    if (this._config.options.length > 0) {\n      this._createNativeSelect(this._config.options)\n    }\n\n    this._createSelect()\n    this._addEventListeners()\n    Data.set(this._element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    return this._isShown() ? this.hide() : this.show()\n  }\n\n  show() {\n    if (this._config.disabled || this._isShown()) {\n      return\n    }\n\n    EventHandler.trigger(this._element, EVENT_SHOW)\n    this._clone.classList.add(CLASS_NAME_SHOW)\n    this._clone.setAttribute('aria-expanded', true)\n    EventHandler.trigger(this._element, EVENT_SHOWN)\n\n    this._createPopper()\n\n    if (this._config.search) {\n      SelectorEngine.findOne(SELECTOR_SEARCH, this._clone).focus()\n    }\n  }\n\n  hide() {\n    EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    this._clone.classList.remove(CLASS_NAME_SHOW)\n    this._clone.setAttribute('aria-expanded', 'false')\n    EventHandler.trigger(this._element, EVENT_HIDDEN)\n  }\n\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    super.dispose()\n  }\n\n  search(text) {\n    this._search = text.length > 0 ? text.toLowerCase() : text\n    this._filterOptionsList()\n    EventHandler.trigger(this._element, EVENT_SEARCH)\n  }\n\n  update(config) {\n    this._config = this._getConfig(config)\n    this._options = this._getOptions()\n    this._selection = this._getSelectedOptions(this._options)\n    this._clone.remove()\n    this._element.innerHTML = ''\n    this._createNativeOptions(this._element, this._options)\n    this._createSelect()\n    this._addEventListeners()\n  }\n\n  selectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.selectAll(option.options)\n        continue\n      }\n\n      this._selectOption(option.value, option.text)\n    }\n  }\n\n  deselectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.deselectAll(option.options)\n        continue\n      }\n\n      this._deselectOption(option.value)\n    }\n  }\n\n  getValue() {\n    return this._selection\n  }\n\n  // Private\n\n  _addEventListeners() {\n    EventHandler.on(this._clone, EVENT_CLICK, () => {\n      if (!this._config.disabled) {\n        this.show()\n      }\n    })\n\n    EventHandler.on(this._indicatorElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.toggle()\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYUP, () => {\n      this._onSearchChange(this._searchElement)\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if ((key === 8 || key === 46) && event.target.value.length === 0) {\n        this._deselectLastOption()\n      }\n\n      this._searchElement.focus()\n    })\n\n    EventHandler.on(this._selectAllElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.selectAll()\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this._onOptionsClick(event.target)\n    })\n\n    EventHandler.on(this._selectionCleanerElement, EVENT_CLICK, event => {\n      if (!this._config.disabled) {\n        event.preventDefault()\n        event.stopPropagation()\n        this.deselectAll()\n      }\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_KEYDOWN, event => {\n      const key = event.keyCode || event.charCode\n\n      if (key === 13) {\n        this._onOptionsClick(event.target)\n        if (this._config.search) {\n          SelectorEngine.findOne(SELECTOR_SEARCH, this._clone).focus()\n        }\n      }\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...this._element.disabled && { disabled: true },\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    return config\n  }\n\n  _getClassNames() {\n    return this._element.classList.value.split(' ')\n  }\n\n  _getOptions(node = this._element) {\n    if (this._config.options) {\n      return this._config.options\n    }\n\n    const nodes = Array.from(node.childNodes).filter(element => element.nodeName === 'OPTION' || element.nodeName === 'OPTGROUP')\n    const options = []\n\n    for (const node of nodes) {\n      if (node.nodeName === 'OPTION' && node.value) {\n        options.push({\n          value: node.value,\n          text: node.innerHTML,\n          selected: node.selected,\n          disabled: node.disabled\n        })\n      }\n\n      if (node.nodeName === 'OPTGROUP') {\n        options.push({\n          label: node.label,\n          options: this._getOptions(node)\n        })\n      }\n    }\n\n    return options\n  }\n\n  _getSelectedOptions(options) {\n    const selected = []\n\n    for (const option of options) {\n      if (typeof option.value === 'undefined') {\n        this._getSelectedOptions(option.options)\n        continue\n      }\n\n      if (option.selected) {\n        // Add only the last option if single select\n        if (!this._config.multiple) {\n          selected.length = 0\n        }\n\n        selected.push({\n          value: String(option.value),\n          text: option.text\n        })\n      }\n    }\n\n    return selected\n  }\n\n  _createNativeSelect(data) {\n    this._element.classList.add(CLASS_NAME_SELECT)\n\n    if (this._config.multiple) {\n      this._element.setAttribute('multiple', true)\n    }\n\n    if (this._config.required) {\n      this._element.setAttribute('required', true)\n    }\n\n    this._createNativeOptions(this._element, data)\n  }\n\n  _createNativeOptions(parentElement, options) {\n    for (const option of options) {\n      if ((typeof option.options === 'undefined')) {\n        const opt = document.createElement('OPTION')\n        opt.value = option.value\n\n        if (option.disabled === true) {\n          opt.setAttribute('disabled', 'disabled')\n        }\n\n        if (option.selected === true) {\n          opt.setAttribute('selected', 'selected')\n        }\n\n        opt.innerHTML = option.text\n        parentElement.append(opt)\n      } else {\n        const optgroup = document.createElement('optgroup')\n        optgroup.label = option.label\n        this._createNativeOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    }\n  }\n\n  _hideNativeSelect() {\n    this._element.tabIndex = '-1'\n    this._element.style.display = 'none'\n  }\n\n  _createSelect() {\n    const div = document.createElement('div')\n    div.classList.add(CLASS_NAME_SELECT)\n    div.classList.toggle('is-invalid', this._config.invalid)\n    div.classList.toggle('is-valid', this._config.valid)\n    div.setAttribute('aria-expanded', 'false')\n\n    if (this._config.disabled) {\n      this._element.classList.add(CLASS_NAME_DISABLED)\n    }\n\n    for (const className of this._getClassNames()) {\n      div.classList.add(className)\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      div.classList.add(CLASS_NAME_SELECTION_TAGS)\n    }\n\n    this._clone = div\n    this._element.parentNode.insertBefore(div, this._element.nextSibling)\n    this._createSelection()\n    this._createButtons()\n\n    if (this._config.search) {\n      this._createSearchInput()\n      this._updateSearch()\n    }\n\n    if (this._element.id) {\n      this._element.setAttribute('name', `multi-select-${this._element.id}`)\n    }\n\n    this._createOptionsContainer()\n    this._hideNativeSelect()\n    this._updateOptionsList()\n  }\n\n  _createSelection() {\n    const togglerEl = document.createElement('div')\n    togglerEl.classList.add(CLASS_NAME_TOGGLER)\n    this._togglerElement = togglerEl\n\n    const selectionEl = document.createElement('div')\n    selectionEl.classList.add(CLASS_NAME_SELECTION)\n\n    togglerEl.append(selectionEl)\n    this._clone.append(togglerEl)\n\n    this._updateSelection()\n    this._selectionElement = selectionEl\n  }\n\n  _createButtons() {\n    const buttons = document.createElement('div')\n    buttons.classList.add('form-multi-select-new-buttons')\n\n    if (this._config.cleaner && this._config.multiple) {\n      const cleaner = document.createElement('button')\n      cleaner.type = 'button'\n      cleaner.classList.add(CLASS_NAME_CLEANER)\n      cleaner.style.display = 'none'\n\n      buttons.append(cleaner)\n      this._selectionCleanerElement = cleaner\n    }\n\n    const indicator = document.createElement('button')\n    indicator.type = 'button'\n    indicator.classList.add('form-multi-select-new-indicator')\n\n    buttons.append(indicator)\n\n    this._indicatorElement = indicator\n    this._togglerElement.append(buttons)\n    this._updateSelectionCleaner()\n  }\n\n  _createPopper() {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('CoreUI\\'s multi select require Popper (https://popper.js.org)')\n    }\n\n    const popperConfig = {\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: 'clippingParents'\n        }\n      },\n      {\n        name: 'offset',\n        options: {\n          offset: [0, 2]\n        }\n      }],\n      placement: isRTL() ? 'bottom-end' : 'bottom-start'\n    }\n    this._popper = Popper.createPopper(this._togglerElement, this._menu, popperConfig)\n  }\n\n  _createSearchInput() {\n    const input = document.createElement('input')\n    input.classList.add(CLASS_NAME_SEARCH)\n\n    if (this._config.disabled) {\n      input.disabled = true\n    }\n\n    this._searchElement = input\n    this._updateSearchSize()\n\n    this._selectionElement.append(input)\n  }\n\n  _createOptionsContainer() {\n    const dropdownDiv = document.createElement('div')\n    dropdownDiv.classList.add(CLASS_NAME_SELECT_DROPDOWN)\n\n    if (this._config.selectAll && this._config.multiple) {\n      const selectAll = document.createElement('button')\n      selectAll.classList.add(CLASS_NAME_SELECT_ALL)\n      selectAll.innerHTML = this._config.selectAllLabel\n\n      this._selectAllElement = selectAll\n\n      dropdownDiv.append(selectAll)\n    }\n\n    const optionsDiv = document.createElement('div')\n    optionsDiv.classList.add(CLASS_NAME_OPTIONS)\n\n    if (this._config.optionsMaxHeight !== 'auto') {\n      optionsDiv.style.maxHeight = `${this._config.optionsMaxHeight}px`\n      optionsDiv.style.overflow = 'auto'\n    }\n\n    dropdownDiv.append(optionsDiv)\n\n    this._clone.append(dropdownDiv)\n\n    this._createOptions(optionsDiv, this._options)\n    this._optionsElement = optionsDiv\n    this._menu = dropdownDiv\n  }\n\n  _createOptions(parentElement, options) {\n    for (const option of options) {\n      if (typeof option.value !== 'undefined') {\n        const optionDiv = document.createElement('div')\n        optionDiv.classList.add(CLASS_NAME_OPTION)\n\n        if (option.disabled) {\n          optionDiv.classList.add(CLASS_NAME_DISABLED)\n        }\n\n        if (this._config.optionsStyle === 'checkbox') {\n          optionDiv.classList.add(CLASS_NAME_OPTION_WITH_CHECKBOX)\n        }\n\n        optionDiv.dataset.value = String(option.value)\n        optionDiv.tabIndex = 0\n        optionDiv.innerHTML = option.text\n        parentElement.append(optionDiv)\n      }\n\n      if (typeof option.label !== 'undefined') {\n        const optgroup = document.createElement('div')\n        optgroup.classList.add(CLASS_NAME_OPTGROUP)\n\n        const optgrouplabel = document.createElement('div')\n        optgrouplabel.innerHTML = option.label\n        optgrouplabel.classList.add(CLASS_NAME_OPTGROUP_LABEL)\n        optgroup.append(optgrouplabel)\n\n        this._createOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    }\n  }\n\n  _createTag(value, text) {\n    const tag = document.createElement('div')\n    tag.classList.add(CLASS_NAME_TAG)\n    tag.dataset.value = value\n    tag.innerHTML = text\n\n    const closeBtn = document.createElement('button')\n    closeBtn.classList.add(CLASS_NAME_TAG_DELETE, 'text-medium-emphasis')\n    closeBtn.setAttribute('aria-label', 'Close')\n    closeBtn.innerHTML = '<span aria-hidden=\"true\">&times;</span>'\n\n    tag.append(closeBtn)\n\n    EventHandler.on(closeBtn, EVENT_CLICK, event => {\n      if (!this._config.disabled) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        tag.remove()\n        this._deselectOption(value)\n      }\n    })\n\n    return tag\n  }\n\n  _onOptionsClick(element) {\n    if (!element.classList.contains(CLASS_NAME_OPTION) || element.classList.contains(CLASS_NAME_LABEL)) {\n      return\n    }\n\n    const value = String(element.dataset.value)\n    const text = element.textContent\n\n    if (this._config.multiple && element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._deselectOption(value)\n    } else if (this._config.multiple && !element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._selectOption(value, text)\n    } else if (!this._config.multiple) {\n      this._selectOption(value, text)\n    }\n\n    if (!this._config.multiple) {\n      this.hide()\n      this.search('')\n      this._searchElement.value = null\n    }\n  }\n\n  _selectOption(value, text) {\n    if (!this._config.multiple) {\n      this.deselectAll()\n    }\n\n    if (this._selection.filter(e => e.value === value).length === 0) {\n      this._selection.push({\n        value,\n        text\n      })\n    }\n\n    const nativeOption = SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element)\n\n    if (nativeOption) {\n      nativeOption.selected = true\n    }\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.add(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectOption(value) {\n    const selected = this._selection.filter(e => e.value !== value)\n    this._selection = selected\n\n    SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element).selected = false\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.remove(CLASS_NAME_SELECTED)\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selection\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectLastOption() {\n    if (this._selection.length > 0) {\n      const last = this._selection.pop()\n      this._deselectOption(last.value)\n    }\n  }\n\n  _updateSelection() {\n    const selection = SelectorEngine.findOne(SELECTOR_SELECTION, this._clone)\n    const search = SelectorEngine.findOne(SELECTOR_SEARCH, this._clone)\n\n    if (this._selection.length === 0 && !this._config.search) {\n      selection.innerHTML = `<span class=\"form-multi-select-new-text\">${this._config.placeholder}</span>`\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter' && !this._config.search) {\n      selection.innerHTML = `<span class=\"form-multi-select-new-text\">${this._selection.length} ${this._config.selectionTypeCounterText}</span>`\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      selection.innerHTML = ''\n\n      for (const e of this._selection) {\n        selection.append(this._createTag(e.value, e.text))\n      }\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'text') {\n      selection.innerHTML = this._selection.map((option, index) => `<span>${option.text}${index === this._selection.length - 1 ? '' : ','}&nbsp;</span>`).join('')\n    }\n\n    if (!this._config.multiple && this._selection.length > 0 && !this._config.search) {\n      selection.innerHTML = `<span class=\"form-multi-select-new-text\">${this._selection[0].text}</span>`\n    }\n\n    if (search) {\n      selection.append(search)\n    }\n\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  _updateSelectionCleaner() {\n    if (!this._config.cleaner || this._selectionCleanerElement === null) {\n      return\n    }\n\n    const selectionCleaner = SelectorEngine.findOne(SELECTOR_CLEANER, this._clone)\n\n    if (this._selection.length > 0) {\n      selectionCleaner.style.removeProperty('display')\n      return\n    }\n\n    selectionCleaner.style.display = 'none'\n  }\n\n  _updateSearch() {\n    if (!this._config.search) {\n      return\n    }\n\n    // Select single\n\n    if (!this._config.multiple && this._selection.length > 0) {\n      this._searchElement.placeholder = this._selection[0].text\n      return\n    }\n\n    if (!this._config.multiple && this._selection.length === 0) {\n      this._searchElement.placeholder = this._config.placeholder\n      return\n    }\n\n    // Select multiple\n\n    if (this._config.multiple && this._selection.length > 0 && this._config.selectionType !== 'counter') {\n      this._searchElement.removeAttribute('placeholder')\n      return\n    }\n\n    if (this._config.multiple && this._selection.length === 0) {\n      this._searchElement.placeholder = this._config.placeholder\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      this._searchElement.placeholder = `${this._selection.length} item(s) selected`\n    }\n  }\n\n  _updateSearchSize(size = 2) {\n    if (!this._searchElement || !this._config.multiple) {\n      return\n    }\n\n    if (this._selection.length > 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.size = size\n      return\n    }\n\n    if (this._selection.length === 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.removeAttribute('size')\n    }\n  }\n\n  _onSearchChange(element) {\n    if (element) {\n      this.search(element.value)\n\n      this._updateSearchSize(element.value.length + 1)\n    }\n  }\n\n  _updateOptionsList(options = this._options) {\n    for (const option of options) {\n      if (option.label) {\n        this._updateOptionsList(option.options)\n        continue\n      }\n\n      if (option.selected) {\n        this._selectOption(option.value, option.text)\n      }\n    }\n  }\n\n  _isVisible(element) {\n    const style = window.getComputedStyle(element)\n    return (style.display !== 'none')\n  }\n\n  _isShown() {\n    return this._clone.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _filterOptionsList() {\n    const options = SelectorEngine.find(SELECTOR_OPTION, this._clone)\n    let visibleOptions = 0\n\n    for (const option of options) {\n      // eslint-disable-next-line unicorn/prefer-includes\n      if (option.textContent.toLowerCase().indexOf(this._search) === -1) {\n        option.style.display = 'none'\n      } else {\n        option.style.removeProperty('display')\n        visibleOptions++\n      }\n\n      const optgroup = option.closest(SELECTOR_OPTGROUP)\n      if (optgroup) {\n        // eslint-disable-next-line  unicorn/prefer-array-some\n        if (SelectorEngine.children(optgroup, SELECTOR_OPTION).filter(element => this._isVisible(element)).length > 0) {\n          optgroup.style.removeProperty('display')\n        } else {\n          optgroup.style.display = 'none'\n        }\n      }\n    }\n\n    if (visibleOptions > 0) {\n      if (SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone).remove()\n      }\n\n      return\n    }\n\n    if (visibleOptions === 0) {\n      const placeholder = document.createElement('div')\n      placeholder.classList.add(CLASS_NAME_OPTIONS_EMPTY)\n      placeholder.innerHTML = this._config.searchNoResultsLabel\n\n      if (!SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._clone)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS, this._clone).append(placeholder)\n      }\n    }\n  }\n\n  // Static\n\n  static multiSelectInterface(element, config) {\n    const data = MultiSelectNew.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      MultiSelectNew.multiSelectInterface(this, config)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event && (event.button === RIGHT_MOUSE_BUTTON ||\n      (event.type === 'keyup' && event.key !== TAB_KEY))) {\n      return\n    }\n\n    const selects = SelectorEngine.find(SELECTOR_SELECT)\n\n    for (let i = 0, len = selects.length; i < len; i++) {\n      const context = Data.get(selects[i], DATA_KEY)\n      const relatedTarget = {\n        relatedTarget: selects[i]\n      }\n\n      if (event && event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      if (!context) {\n        continue\n      }\n\n      if (!context._clone.classList.contains(CLASS_NAME_SHOW)) {\n        continue\n      }\n\n      if (context._clone.contains(event.target)) {\n        continue\n      }\n\n      context._clone.classList.remove(CLASS_NAME_SHOW)\n\n      EventHandler.trigger(context._element, EVENT_HIDDEN)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const ms of SelectorEngine.find(SELECTOR_SELECT)) {\n    if (ms.tabIndex !== -1) {\n      MultiSelectNew.multiSelectInterface(ms)\n    }\n  }\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, MultiSelectNew.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, MultiSelectNew.clearMenus)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .MultiSelect to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(MultiSelectNew)\n\nexport default MultiSelectNew\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","SELECTOR_CLEANER","SELECTOR_OPTGROUP","SELECTOR_OPTION","SELECTOR_OPTIONS","SELECTOR_OPTIONS_EMPTY","SELECTOR_SEARCH","SELECTOR_SELECT","SELECTOR_SELECTION","EVENT_CHANGED","EVENT_CLICK","EVENT_HIDE","EVENT_HIDDEN","EVENT_KEYDOWN","EVENT_KEYUP","EVENT_SEARCH","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_CLEANER","CLASS_NAME_DISABLED","CLASS_NAME_LABEL","CLASS_NAME_SELECT","CLASS_NAME_SELECT_DROPDOWN","CLASS_NAME_SELECT_ALL","CLASS_NAME_OPTGROUP","CLASS_NAME_OPTGROUP_LABEL","CLASS_NAME_OPTION","CLASS_NAME_OPTION_WITH_CHECKBOX","CLASS_NAME_OPTIONS","CLASS_NAME_OPTIONS_EMPTY","CLASS_NAME_SEARCH","CLASS_NAME_SELECTED","CLASS_NAME_SELECTION","CLASS_NAME_SELECTION_TAGS","CLASS_NAME_SHOW","CLASS_NAME_TAG","CLASS_NAME_TAG_DELETE","CLASS_NAME_TOGGLER","Default","cleaner","disabled","invalid","multiple","placeholder","required","options","optionsMaxHeight","optionsStyle","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","valid","DefaultType","MultiSelectNew","BaseComponent","constructor","element","config","_indicatorElement","_selectAllElement","_selectionElement","_selectionCleanerElement","_searchElement","_togglerElement","_optionsElement","_clone","_menu","_options","_getOptions","_popper","_search","_selection","_getSelectedOptions","_config","length","_createNativeSelect","_createSelect","_addEventListeners","Data","set","_element","toggle","_isShown","hide","show","EventHandler","trigger","classList","add","setAttribute","_createPopper","SelectorEngine","findOne","focus","destroy","remove","dispose","text","toLowerCase","_filterOptionsList","update","_getConfig","innerHTML","_createNativeOptions","option","label","_selectOption","value","deselectAll","_deselectOption","getValue","on","event","preventDefault","stopPropagation","_onSearchChange","key","keyCode","charCode","target","_deselectLastOption","_onOptionsClick","Manipulator","getDataAttributes","_getClassNames","split","node","nodes","Array","from","childNodes","filter","nodeName","push","selected","String","data","parentElement","opt","document","createElement","append","optgroup","_hideNativeSelect","tabIndex","style","display","div","className","parentNode","insertBefore","nextSibling","_createSelection","_createButtons","_createSearchInput","_updateSearch","id","_createOptionsContainer","_updateOptionsList","togglerEl","selectionEl","_updateSelection","buttons","type","indicator","_updateSelectionCleaner","Popper","TypeError","popperConfig","modifiers","name","boundary","offset","placement","isRTL","createPopper","input","_updateSearchSize","dropdownDiv","optionsDiv","maxHeight","overflow","_createOptions","optionDiv","dataset","optgrouplabel","_createTag","tag","closeBtn","contains","textContent","e","nativeOption","last","pop","selection","map","index","join","selectionCleaner","removeProperty","removeAttribute","size","_isVisible","window","getComputedStyle","find","visibleOptions","indexOf","closest","children","multiSelectInterface","getOrCreateInstance","jQueryInterface","each","clearMenus","button","selects","i","len","context","get","relatedTarget","ms","defineJQueryPlugin"],"mappings":"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"}