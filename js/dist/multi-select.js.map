{"version":3,"file":"multi-select.js","sources":["../src/multi-select.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO multi-select.js\n * License (https://coreui.io/pro/license/)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport BaseComponent from './base-component.js'\nimport Data from './dom/data.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { DefaultAllowlist, sanitizeHtml } from './util/sanitizer.js'\nimport {\n  defineJQueryPlugin,\n  getNextActiveElement,\n  getElement,\n  getUID,\n  isVisible,\n  isRTL\n} from './util/index.js'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'multi-select'\nconst DATA_KEY = 'coreui.multi-select'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst BACKSPACE_KEY = 'Backspace'\nconst DELETE_KEY = 'Delete'\nconst ENTER_KEY = 'Enter'\nconst ESCAPE_KEY = 'Escape'\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2 // MouseEvent.button value for the secondary button, usually the right button\n\nconst SELECTOR_CLEANER = '.form-multi-select-cleaner'\nconst SELECTOR_OPTGROUP = '.form-multi-select-optgroup'\nconst SELECTOR_OPTION = '.form-multi-select-option'\nconst SELECTOR_OPTIONS = '.form-multi-select-options'\nconst SELECTOR_OPTIONS_EMPTY = '.form-multi-select-options-empty'\nconst SELECTOR_SEARCH = '.form-multi-select-search'\nconst SELECTOR_SELECT = '.form-multi-select'\nconst SELECTOR_SELECTION = '.form-multi-select-selection'\nconst SELECTOR_VISIBLE_ITEMS = '.form-multi-select-options .form-multi-select-option:not(.disabled):not(:disabled)'\n\nconst EVENT_CHANGED = `changed${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_KEYUP = `keyup${EVENT_KEY}`\nconst EVENT_SEARCH = `search${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CLEANER = 'form-multi-select-cleaner'\nconst CLASS_NAME_DISABLED = 'disabled'\nconst CLASS_NAME_INPUT_GROUP = 'form-multi-select-input-group'\nconst CLASS_NAME_LABEL = 'label'\nconst CLASS_NAME_SELECT = 'form-multi-select'\nconst CLASS_NAME_SELECT_DROPDOWN = 'form-multi-select-dropdown'\nconst CLASS_NAME_SELECT_ALL = 'form-multi-select-all'\nconst CLASS_NAME_OPTGROUP = 'form-multi-select-optgroup'\nconst CLASS_NAME_OPTGROUP_LABEL = 'form-multi-select-optgroup-label'\nconst CLASS_NAME_OPTION = 'form-multi-select-option'\nconst CLASS_NAME_OPTION_WITH_CHECKBOX = 'form-multi-select-option-with-checkbox'\nconst CLASS_NAME_OPTIONS = 'form-multi-select-options'\nconst CLASS_NAME_OPTIONS_EMPTY = 'form-multi-select-options-empty'\nconst CLASS_NAME_SEARCH = 'form-multi-select-search'\nconst CLASS_NAME_SELECTED = 'form-multi-selected'\nconst CLASS_NAME_SELECTION = 'form-multi-select-selection'\nconst CLASS_NAME_SELECTION_TAGS = 'form-multi-select-selection-tags'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_TAG = 'form-multi-select-tag'\nconst CLASS_NAME_TAG_DELETE = 'form-multi-select-tag-delete'\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  ariaCleanerLabel: 'Clear all selections',\n  ariaIndicatorLabel: 'Toggle visibility of options menu',\n  cleaner: true,\n  clearSearchOnSelect: false,\n  container: false,\n  disabled: false,\n  id: null,\n  invalid: false,\n  multiple: true,\n  name: null,\n  options: false,\n  optionsGroupsTemplate: null,\n  optionsMaxHeight: 'auto',\n  optionsStyle: 'checkbox',\n  optionsTemplate: null,\n  placeholder: 'Select...',\n  required: false,\n  sanitize: true,\n  sanitizeFn: null,\n  search: false,\n  searchNoResultsLabel: 'No results found',\n  selectAll: true,\n  selectAllLabel: 'Select all options',\n  selectionType: 'tags',\n  selectionTypeCounterText: 'item(s) selected',\n  valid: false,\n  value: null\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  ariaCleanerLabel: 'string',\n  ariaIndicatorLabel: 'string',\n  cleaner: 'boolean',\n  clearSearchOnSelect: 'boolean',\n  container: '(string|element|boolean)',\n  disabled: 'boolean',\n  id: '(string|null)',\n  invalid: 'boolean',\n  multiple: 'boolean',\n  name: '(string|null)',\n  options: '(boolean|array)',\n  optionsGroupsTemplate: '(function|null)',\n  optionsMaxHeight: '(number|string)',\n  optionsStyle: 'string',\n  optionsTemplate: '(function|null)',\n  placeholder: 'string',\n  required: 'boolean',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  search: '(boolean|string)',\n  searchNoResultsLabel: 'string',\n  selectAll: 'boolean',\n  selectAllLabel: 'string',\n  selectionType: 'string',\n  selectionTypeCounterText: 'string',\n  valid: 'boolean',\n  value: '(string|array|null)'\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass MultiSelect extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._uniqueId = this._config.id || this._element.id || getUID(`${this.constructor.NAME}`)\n    this._uniqueName = this._config.name || this._element.name || this._uniqueId\n    this._configureNativeSelect()\n    this._indicatorElement = null\n    this._selectAllElement = null\n    this._selectionElement = null\n    this._selectionCleanerElement = null\n    this._searchElement = null\n    this._togglerElement = null\n    this._optionsElement = null\n\n    this._clone = null\n    this._menu = null\n    this._selected = []\n    this._options = this._getOptions()\n    this._popper = null\n    this._search = ''\n\n    if (this._config.options.length > 0) {\n      this._createNativeOptions(this._element, this._config.options)\n    }\n\n    this._createSelect()\n    this._addEventListeners()\n    Data.set(this._element, DATA_KEY, this)\n  }\n\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    return this._isShown() ? this.hide() : this.show()\n  }\n\n  show() {\n    if (this._config.disabled || this._isShown()) {\n      return\n    }\n\n    EventHandler.trigger(this._element, EVENT_SHOW)\n    this._clone.classList.add(CLASS_NAME_SHOW)\n    this._clone.setAttribute('aria-expanded', true)\n\n    if (this._config.container) {\n      this._menu.style.minWidth = `${this._clone.offsetWidth}px`\n      this._menu.classList.add(CLASS_NAME_SHOW)\n    }\n\n    EventHandler.trigger(this._element, EVENT_SHOWN)\n\n    this._createPopper()\n\n    if (this._config.search) {\n      SelectorEngine.findOne(SELECTOR_SEARCH, this._clone).focus()\n    }\n  }\n\n  hide() {\n    EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    if (this._config.search) {\n      this._searchElement.value = ''\n    }\n\n    this._onSearchChange(this._searchElement)\n    this._clone.classList.remove(CLASS_NAME_SHOW)\n    this._clone.setAttribute('aria-expanded', 'false')\n\n    if (this._config.container) {\n      this._menu.classList.remove(CLASS_NAME_SHOW)\n    }\n\n    EventHandler.trigger(this._element, EVENT_HIDDEN)\n  }\n\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    super.dispose()\n  }\n\n  search(text) {\n    this._search = text.length > 0 ? text.toLowerCase() : text\n    this._filterOptionsList()\n    EventHandler.trigger(this._element, EVENT_SEARCH)\n  }\n\n  update(config) {\n    if (config.value) {\n      this.deselectAll()\n    }\n\n    this._config = { ...this._config, ...this._configAfterMerge(config) }\n    this._selected = []\n    this._options = this._getOptions()\n    this._menu.remove()\n    this._clone.remove()\n    this._element.innerHTML = ''\n    this._createNativeOptions(this._element, this._options)\n    this._createSelect()\n    this._addEventListeners()\n  }\n\n  selectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.selectAll(option.options)\n        continue\n      }\n\n      this._selectOption(option.value, option.text)\n    }\n  }\n\n  deselectAll(options = this._options) {\n    for (const option of options) {\n      if (option.disabled) {\n        continue\n      }\n\n      if (option.label) {\n        this.deselectAll(option.options)\n        continue\n      }\n\n      this._deselectOption(option.value)\n    }\n  }\n\n  getValue() {\n    return this._selected\n  }\n\n  // Private\n\n  _addEventListeners() {\n    EventHandler.on(this._clone, EVENT_CLICK, () => {\n      if (!this._config.disabled) {\n        this.show()\n      }\n    })\n\n    EventHandler.on(this._clone, EVENT_KEYDOWN, event => {\n      if (event.key === ESCAPE_KEY) {\n        this.hide()\n        return\n      }\n\n      if (this._config.search === 'global' && (event.key.length === 1 || event.key === BACKSPACE_KEY || event.key === DELETE_KEY)) {\n        this._searchElement.focus()\n      }\n    })\n\n    EventHandler.on(this._menu, EVENT_KEYDOWN, event => {\n      if (this._config.search === 'global' && (event.key.length === 1 || event.key === BACKSPACE_KEY || event.key === DELETE_KEY)) {\n        this._searchElement.focus()\n      }\n    })\n\n    EventHandler.on(this._togglerElement, EVENT_KEYDOWN, event => {\n      if (!this._isShown() && (event.key === ENTER_KEY || event.key === ARROW_DOWN_KEY)) {\n        event.preventDefault()\n        this.show()\n        return\n      }\n\n      if (this._isShown() && event.key === ARROW_DOWN_KEY) {\n        event.preventDefault()\n        this._selectMenuItem(event)\n      }\n    })\n\n    EventHandler.on(this._indicatorElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.toggle()\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYUP, () => {\n      this._onSearchChange(this._searchElement)\n    })\n\n    EventHandler.on(this._searchElement, EVENT_KEYDOWN, event => {\n      if (!this._isShown()) {\n        this.show()\n      }\n\n      if (event.key === ARROW_DOWN_KEY && this._searchElement.value.length === this._searchElement.selectionStart) {\n        this._selectMenuItem(event)\n        return\n      }\n\n      if ((event.key === BACKSPACE_KEY || event.key === DELETE_KEY) && event.target.value.length === 0) {\n        this._deselectLastOption()\n      }\n\n      this._searchElement.focus()\n    })\n\n    EventHandler.on(this._selectAllElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this.selectAll()\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_CLICK, event => {\n      event.preventDefault()\n      event.stopPropagation()\n      this._onOptionsClick(event.target)\n    })\n\n    EventHandler.on(this._selectionCleanerElement, EVENT_CLICK, event => {\n      if (!this._config.disabled) {\n        event.preventDefault()\n        event.stopPropagation()\n        this.deselectAll()\n      }\n    })\n\n    EventHandler.on(this._optionsElement, EVENT_KEYDOWN, event => {\n      if (event.key === ENTER_KEY) {\n        this._onOptionsClick(event.target)\n      }\n\n      if ([ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key)) {\n        event.preventDefault()\n        this._selectMenuItem(event)\n      }\n    })\n  }\n\n  _getClassNames() {\n    return this._element.classList.value.split(' ')\n  }\n\n  _getOptions() {\n    if (this._config.options) {\n      return this._getOptionsFromConfig()\n    }\n\n    return this._getOptionsFromElement()\n  }\n\n  _getOptionsFromConfig(options = this._config.options) {\n    const _options = []\n    for (const option of options) {\n      if (option.options && Array.isArray(option.options)) {\n        const customGroupProperties = { ...option }\n\n        delete customGroupProperties.label\n        delete customGroupProperties.options\n\n        _options.push({\n          ...customGroupProperties,\n          label: option.label,\n          options: this._getOptionsFromConfig(option.options)\n        })\n\n        continue\n      }\n\n      const value = String(option.value)\n      const isSelected = option.selected || (this._config.value && this._config.value.includes(value))\n\n      const customProperties = typeof option === 'object' ? { ...option } : {}\n\n      delete customProperties.value\n      delete customProperties.selected\n      delete customProperties.disabled\n\n      _options.push({\n        ...customProperties,\n        value,\n        ...isSelected && { selected: true },\n        ...option.disabled && { disabled: true }\n      })\n\n      if (isSelected) {\n        this._selected.push({\n          value: String(option.value),\n          text: option.text\n        })\n      }\n    }\n\n    return _options\n  }\n\n  _getOptionsFromElement(node = this._element) {\n    const nodes = Array.from(node.childNodes).filter(element => element.nodeName === 'OPTION' || element.nodeName === 'OPTGROUP')\n    const options = []\n\n    for (const node of nodes) {\n      if (node.nodeName === 'OPTION' && node.value) {\n        const value = String(node.value)\n        const text = node.innerHTML\n        const isSelected = node.selected || (this._config.value && this._config.value.includes(node.value))\n        options.push({\n          value,\n          text,\n          selected: isSelected,\n          disabled: node.disabled\n        })\n\n        if (node.selected || isSelected) {\n          this._selected.push({\n            value,\n            text: node.innerHTML,\n            ...node.disabled && { disabled: true }\n          })\n        }\n      }\n\n      if (node.nodeName === 'OPTGROUP') {\n        options.push({\n          label: node.label,\n          options: this._getOptionsFromElement(node)\n        })\n      }\n    }\n\n    return options\n  }\n\n  _configureNativeSelect() {\n    this._element.classList.add(CLASS_NAME_SELECT)\n\n    if (this._config.multiple) {\n      this._element.setAttribute('multiple', true)\n    }\n\n    if (this._config.required) {\n      this._element.setAttribute('required', true)\n    }\n  }\n\n  _createNativeOptions(parentElement, options) {\n    for (const option of options) {\n      if ((typeof option.options === 'undefined')) {\n        const opt = document.createElement('OPTION')\n        opt.value = option.value\n\n        if (option.disabled === true) {\n          opt.setAttribute('disabled', 'disabled')\n        }\n\n        if (option.selected === true) {\n          opt.setAttribute('selected', 'selected')\n        }\n\n        opt.innerHTML = option.text\n        parentElement.append(opt)\n      } else {\n        const optgroup = document.createElement('optgroup')\n        optgroup.label = option.label\n        this._createNativeOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    }\n  }\n\n  _hideNativeSelect() {\n    this._element.tabIndex = '-1'\n    this._element.style.display = 'none'\n  }\n\n  _createSelect() {\n    const multiSelectEl = document.createElement('div')\n    multiSelectEl.classList.add(CLASS_NAME_SELECT)\n    multiSelectEl.classList.toggle('is-invalid', this._config.invalid)\n    multiSelectEl.classList.toggle('is-valid', this._config.valid)\n    multiSelectEl.role = 'combobox'\n    multiSelectEl.setAttribute('aria-expanded', 'false')\n    multiSelectEl.setAttribute('aria-haspopup', 'listbox')\n    multiSelectEl.setAttribute('aria-owns', `${this._uniqueId}-listbox`)\n\n    if (this._config.disabled) {\n      this._element.classList.add(CLASS_NAME_DISABLED)\n    }\n\n    for (const className of this._getClassNames()) {\n      multiSelectEl.classList.add(className)\n    }\n\n    this._clone = multiSelectEl\n    this._element.parentNode.insertBefore(multiSelectEl, this._element.nextSibling)\n    this._createSelection()\n    this._createButtons()\n\n    if (this._config.search) {\n      this._createSearchInput()\n      this._updateSearch()\n    }\n\n    this._element.setAttribute('id', this._uniqueId)\n    this._element.setAttribute('name', this._uniqueName)\n\n    this._createOptionsContainer()\n    this._hideNativeSelect()\n    this._updateOptionsList()\n  }\n\n  _createSelection() {\n    const togglerEl = document.createElement('div')\n    togglerEl.classList.add(CLASS_NAME_INPUT_GROUP)\n    this._togglerElement = togglerEl\n\n    if (!this._config.search && !this._config.disabled) {\n      togglerEl.tabIndex = 0\n    }\n\n    const selectionEl = document.createElement('div')\n    selectionEl.classList.add(CLASS_NAME_SELECTION)\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      selectionEl.classList.add(CLASS_NAME_SELECTION_TAGS)\n    }\n\n    togglerEl.append(selectionEl)\n    this._clone.append(togglerEl)\n\n    this._updateSelection()\n    this._selectionElement = selectionEl\n  }\n\n  _createButtons() {\n    const buttons = document.createElement('div')\n    buttons.classList.add('form-multi-select-buttons')\n\n    if (!this._config.disabled && this._config.cleaner && this._config.multiple) {\n      const cleaner = document.createElement('button')\n      cleaner.type = 'button'\n      cleaner.classList.add(CLASS_NAME_CLEANER)\n      cleaner.style.display = 'none'\n      cleaner.setAttribute('aria-label', this._config.ariaCleanerLabel)\n\n      buttons.append(cleaner)\n      this._selectionCleanerElement = cleaner\n    }\n\n    const indicator = document.createElement('button')\n    indicator.type = 'button'\n    indicator.classList.add('form-multi-select-indicator')\n    indicator.setAttribute('aria-label', this._config.ariaIndicatorLabel)\n\n    if (this._config.disabled) {\n      indicator.tabIndex = -1\n    }\n\n    buttons.append(indicator)\n\n    this._indicatorElement = indicator\n    this._togglerElement.append(buttons)\n    this._updateSelectionCleaner()\n  }\n\n  _createPopper() {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('CoreUI\\'s multi select require Popper (https://popper.js.org)')\n    }\n\n    const popperConfig = {\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: 'clippingParents'\n        }\n      },\n      {\n        name: 'offset',\n        options: {\n          offset: [0, 2]\n        }\n      }],\n      placement: isRTL() ? 'bottom-end' : 'bottom-start'\n    }\n\n    this._popper = Popper.createPopper(this._togglerElement, this._menu, popperConfig)\n  }\n\n  _createSearchInput() {\n    const input = document.createElement('input')\n    input.classList.add(CLASS_NAME_SEARCH)\n\n    if (this._config.disabled) {\n      input.disabled = true\n    }\n\n    input.setAttribute('id', `search-${this._uniqueId}`)\n    input.setAttribute('name', `search-${this._uniqueName}`)\n\n    this._searchElement = input\n    this._updateSearchSize()\n\n    this._selectionElement.append(input)\n  }\n\n  _createOptionsContainer() {\n    const dropdownDiv = document.createElement('div')\n    dropdownDiv.classList.add(CLASS_NAME_SELECT_DROPDOWN)\n    dropdownDiv.role = 'listbox'\n    dropdownDiv.setAttribute('id', `${this._uniqueId}-listbox`)\n\n    if (this._config.multiple) {\n      dropdownDiv.setAttribute('aria-multiselectable', 'true')\n    }\n\n    if (this._config.selectAll && this._config.multiple) {\n      const selectAllButton = document.createElement('button')\n      selectAllButton.type = 'button'\n      selectAllButton.classList.add(CLASS_NAME_SELECT_ALL)\n      selectAllButton.innerHTML = this._config.selectAllLabel\n\n      this._selectAllElement = selectAllButton\n\n      dropdownDiv.append(selectAllButton)\n    }\n\n    const optionsDiv = document.createElement('div')\n    optionsDiv.classList.add(CLASS_NAME_OPTIONS)\n\n    if (this._config.optionsMaxHeight !== 'auto') {\n      optionsDiv.style.maxHeight = `${this._config.optionsMaxHeight}px`\n      optionsDiv.style.overflow = 'auto'\n    }\n\n    dropdownDiv.append(optionsDiv)\n\n    const { container } = this._config\n    if (container) {\n      container.append(dropdownDiv)\n    } else {\n      this._clone.append(dropdownDiv)\n    }\n\n    this._createOptions(optionsDiv, this._options)\n    this._optionsElement = optionsDiv\n    this._menu = dropdownDiv\n  }\n\n  _createOptions(parentElement, options) {\n    for (const option of options) {\n      if (typeof option.value !== 'undefined') {\n        const optionDiv = document.createElement('div')\n        optionDiv.classList.add(CLASS_NAME_OPTION)\n\n        if (option.disabled) {\n          optionDiv.classList.add(CLASS_NAME_DISABLED)\n        }\n\n        if (this._config.optionsStyle === 'checkbox') {\n          optionDiv.classList.add(CLASS_NAME_OPTION_WITH_CHECKBOX)\n        }\n\n        optionDiv.dataset.value = String(option.value)\n        optionDiv.tabIndex = 0\n        optionDiv.role = 'option'\n\n        if (this._config.optionsTemplate && typeof this._config.optionsTemplate === 'function') {\n          optionDiv.innerHTML = this._config.sanitize ?\n            sanitizeHtml(this._config.optionsTemplate(option), this._config.allowList, this._config.sanitizeFn) :\n            this._config.optionsTemplate(option)\n        } else {\n          optionDiv.textContent = option.text\n        }\n\n        parentElement.append(optionDiv)\n      }\n\n      if (typeof option.label !== 'undefined') {\n        const optgroup = document.createElement('div')\n        optgroup.classList.add(CLASS_NAME_OPTGROUP)\n\n        const optgrouplabel = document.createElement('div')\n\n        if (this._config.optionsGroupsTemplate && typeof this._config.optionsGroupsTemplate === 'function') {\n          optgrouplabel.innerHTML = this._config.sanitize ?\n            sanitizeHtml(this._config.optionsGroupsTemplate(option), this._config.allowList, this._config.sanitizeFn) :\n            this._config.optionsGroupsTemplate(option)\n        } else {\n          optgrouplabel.textContent = option.label\n        }\n\n        optgrouplabel.classList.add(CLASS_NAME_OPTGROUP_LABEL)\n        optgroup.append(optgrouplabel)\n\n        this._createOptions(optgroup, option.options)\n        parentElement.append(optgroup)\n      }\n    }\n  }\n\n  _createTag(value, text, disabled) {\n    const tag = document.createElement('div')\n    tag.classList.add(CLASS_NAME_TAG)\n    tag.dataset.value = value\n    tag.innerHTML = text\n\n    if (!this._config.disabled && disabled !== true) {\n      const closeBtn = document.createElement('button')\n      closeBtn.type = 'button'\n      closeBtn.classList.add(CLASS_NAME_TAG_DELETE)\n      closeBtn.setAttribute('aria-label', 'Close')\n\n      EventHandler.on(closeBtn, EVENT_CLICK, event => {\n        event.preventDefault()\n        event.stopPropagation()\n\n        tag.remove()\n        this._deselectOption(value)\n      })\n\n      tag.append(closeBtn)\n    }\n\n    return tag\n  }\n\n  _onOptionsClick(element) {\n    if (element.classList.contains(CLASS_NAME_LABEL)) {\n      return\n    }\n\n    if (!element.classList.contains(CLASS_NAME_OPTION)) {\n      element = element.closest(SELECTOR_OPTION)\n\n      if (!element) {\n        return\n      }\n    }\n\n    const value = String(element.dataset.value)\n    const { text } = this._findOptionByValue(value)\n\n    if (this._config.multiple && element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._deselectOption(value)\n    } else if (this._config.multiple && !element.classList.contains(CLASS_NAME_SELECTED)) {\n      this._selectOption(value, text)\n    } else if (!this._config.multiple) {\n      this._selectOption(value, text)\n    }\n\n    if (!this._config.multiple) {\n      this.hide()\n      this.search('')\n      this._searchElement.value = null\n    }\n\n    if (this._config.clearSearchOnSelect && this._config.search) {\n      this.search('')\n      this._searchElement.value = null\n      this._searchElement.focus()\n    }\n  }\n\n  _findOptionByValue(value, options = this._options) {\n    for (const option of options) {\n      if (String(option.value) === value) {\n        return option\n      }\n\n      if (option.options && Array.isArray(option.options)) {\n        const found = this._findOptionByValue(value, option.options)\n        if (found) {\n          return found\n        }\n      }\n    }\n\n    return null\n  }\n\n  _selectOption(value, text) {\n    if (!this._config.multiple) {\n      this.deselectAll()\n    }\n\n    if (this._selected.filter(option => option.value === String(value)).length === 0) {\n      this._selected.push({\n        value: String(value),\n        text\n      })\n    }\n\n    const nativeOption = SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element)\n\n    if (nativeOption) {\n      nativeOption.selected = true\n    }\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.add(CLASS_NAME_SELECTED)\n      option.setAttribute('aria-selected', 'true')\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selected\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectOption(value) {\n    this._selected = this._selected.filter(option => option.value !== String(value))\n\n    SelectorEngine.findOne(`option[value=\"${value}\"]`, this._element).selected = false\n\n    const option = SelectorEngine.findOne(`[data-value=\"${value}\"]`, this._optionsElement)\n    if (option) {\n      option.classList.remove(CLASS_NAME_SELECTED)\n      option.setAttribute('aria-selected', 'false')\n    }\n\n    EventHandler.trigger(this._element, EVENT_CHANGED, {\n      value: this._selected\n    })\n\n    this._updateSelection()\n    this._updateSelectionCleaner()\n    this._updateSearch()\n    this._updateSearchSize()\n  }\n\n  _deselectLastOption() {\n    if (this._selected.length > 0) {\n      const last = this._selected.findLast(option => option.disabled !== true)\n      if (last) {\n        this._deselectOption(last.value)\n      }\n    }\n  }\n\n  _updateSelection() {\n    const selection = SelectorEngine.findOne(SELECTOR_SELECTION, this._clone)\n    const search = SelectorEngine.findOne(SELECTOR_SEARCH, this._clone)\n\n    if (this._selected.length === 0 && !this._config.search) {\n      selection.innerHTML = `<span class=\"form-multi-select-placeholder\">${this._config.placeholder}</span>`\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter' && !this._config.search) {\n      selection.innerHTML = `${this._selected.length} ${this._config.selectionTypeCounterText}`\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'tags') {\n      selection.innerHTML = ''\n\n      for (const option of this._selected) {\n        selection.append(this._createTag(option.value, option.text, option.disabled))\n      }\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'text') {\n      selection.innerHTML = this._selected.map((option, index) => `<span>${option.text}${index === this._selected.length - 1 ? '' : ','}&nbsp;</span>`).join('')\n    }\n\n    if (!this._config.multiple && this._selected.length > 0 && !this._config.search) {\n      selection.innerHTML = this._selected[0].text\n    }\n\n    if (search) {\n      selection.append(search)\n    }\n\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  _updateSelectionCleaner() {\n    if (!this._config.cleaner || this._selectionCleanerElement === null) {\n      return\n    }\n\n    const selectionCleaner = SelectorEngine.findOne(SELECTOR_CLEANER, this._clone)\n\n    if (this._selected.length > 0) {\n      selectionCleaner.style.removeProperty('display')\n      return\n    }\n\n    selectionCleaner.style.display = 'none'\n  }\n\n  _updateSearch() {\n    if (!this._config.search) {\n      return\n    }\n\n    // Select single\n\n    if (!this._config.multiple && this._selected.length > 0) {\n      this._searchElement.placeholder = this._selected[0].text\n      return\n    }\n\n    if (!this._config.multiple && this._selected.length === 0) {\n      this._searchElement.placeholder = this._config.placeholder\n      return\n    }\n\n    // Select multiple\n\n    if (this._config.multiple && this._selected.length > 0 && this._config.selectionType !== 'counter') {\n      this._searchElement.removeAttribute('placeholder')\n      return\n    }\n\n    if (this._config.multiple && this._selected.length === 0) {\n      this._searchElement.placeholder = this._config.placeholder\n      return\n    }\n\n    if (this._config.multiple && this._config.selectionType === 'counter') {\n      this._searchElement.placeholder = `${this._selected.length} ${this._config.selectionTypeCounterText}`\n    }\n  }\n\n  _updateSearchSize(size = 2) {\n    if (!this._searchElement || !this._config.multiple) {\n      return\n    }\n\n    if (this._selected.length > 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.size = size\n      return\n    }\n\n    if (this._selected.length === 0 && (this._config.selectionType === 'tags' || this._config.selectionType === 'text')) {\n      this._searchElement.removeAttribute('size')\n    }\n  }\n\n  _onSearchChange(element) {\n    if (element) {\n      this.search(element.value)\n\n      this._updateSearchSize(element.value.length + 1)\n    }\n  }\n\n  _updateOptionsList(options = this._options) {\n    for (const option of options) {\n      if (option.label) {\n        this._updateOptionsList(option.options)\n        continue\n      }\n\n      if (option.selected) {\n        this._selectOption(option.value, option.text)\n      }\n    }\n  }\n\n  _isVisible(element) {\n    const style = window.getComputedStyle(element)\n    return (style.display !== 'none')\n  }\n\n  _isShown() {\n    return this._clone.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _filterOptionsList() {\n    const options = SelectorEngine.find(SELECTOR_OPTION, this._menu)\n    let visibleOptions = 0\n\n    for (const option of options) {\n      // eslint-disable-next-line unicorn/prefer-includes\n      if (option.textContent.toLowerCase().indexOf(this._search) === -1) {\n        option.style.display = 'none'\n      } else {\n        option.style.removeProperty('display')\n        visibleOptions++\n      }\n\n      const optgroup = option.closest(SELECTOR_OPTGROUP)\n      if (optgroup) {\n        // eslint-disable-next-line  unicorn/prefer-array-some\n        if (SelectorEngine.children(optgroup, SELECTOR_OPTION).filter(element => this._isVisible(element)).length > 0) {\n          optgroup.style.removeProperty('display')\n        } else {\n          optgroup.style.display = 'none'\n        }\n      }\n    }\n\n    if (visibleOptions > 0) {\n      if (SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._menu)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._menu).remove()\n      }\n\n      return\n    }\n\n    if (visibleOptions === 0) {\n      const placeholder = document.createElement('div')\n      placeholder.classList.add(CLASS_NAME_OPTIONS_EMPTY)\n      placeholder.innerHTML = this._config.searchNoResultsLabel\n\n      if (!SelectorEngine.findOne(SELECTOR_OPTIONS_EMPTY, this._menu)) {\n        SelectorEngine.findOne(SELECTOR_OPTIONS, this._menu).append(placeholder)\n      }\n    }\n  }\n\n  _selectMenuItem({ key, target }) {\n    const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(element => isVisible(element))\n\n    if (!items.length) {\n      return\n    }\n\n    // if target isn't included in items (e.g. when expanding the dropdown)\n    // allow cycling to get the last item in case key equals ARROW_UP_KEY\n    getNextActiveElement(items, target, key === ARROW_DOWN_KEY, !items.includes(target)).focus()\n  }\n\n  _configAfterMerge(config) {\n    if (config.container === true) {\n      config.container = document.body\n    }\n\n    if (typeof config.container === 'object' || typeof config.container === 'string') {\n      config.container = getElement(config.container)\n    }\n\n    if (typeof config.value === 'number') {\n      config.value = [String(config.value)]\n    }\n\n    if (typeof config.value === 'string') {\n      config.value = config.value.split(/,\\s*/).map(String)\n    }\n\n    return config\n  }\n\n  // Static\n\n  static multiSelectInterface(element, config) {\n    const data = MultiSelect.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      MultiSelect.multiSelectInterface(this, config)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event && (event.button === RIGHT_MOUSE_BUTTON ||\n      (event.type === 'keyup' && event.key !== TAB_KEY))) {\n      return\n    }\n\n    const selects = SelectorEngine.find(SELECTOR_SELECT)\n\n    for (let i = 0, len = selects.length; i < len; i++) {\n      const context = Data.get(selects[i], DATA_KEY)\n      const relatedTarget = {\n        relatedTarget: selects[i]\n      }\n\n      if (event && event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      if (!context) {\n        continue\n      }\n\n      if (!context._clone.classList.contains(CLASS_NAME_SHOW)) {\n        continue\n      }\n\n      if (context._clone.contains(event.target)) {\n        continue\n      }\n\n      context.hide()\n\n      EventHandler.trigger(context._element, EVENT_HIDDEN)\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const ms of SelectorEngine.find(SELECTOR_SELECT)) {\n    if (ms.tabIndex !== -1) {\n      MultiSelect.multiSelectInterface(ms)\n    }\n  }\n})\nEventHandler.on(document, EVENT_CLICK_DATA_API, MultiSelect.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, MultiSelect.clearMenus)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(MultiSelect)\n\nexport default MultiSelect\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ARROW_UP_KEY","ARROW_DOWN_KEY","BACKSPACE_KEY","DELETE_KEY","ENTER_KEY","ESCAPE_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","SELECTOR_CLEANER","SELECTOR_OPTGROUP","SELECTOR_OPTION","SELECTOR_OPTIONS","SELECTOR_OPTIONS_EMPTY","SELECTOR_SEARCH","SELECTOR_SELECT","SELECTOR_SELECTION","SELECTOR_VISIBLE_ITEMS","EVENT_CHANGED","EVENT_CLICK","EVENT_HIDE","EVENT_HIDDEN","EVENT_KEYDOWN","EVENT_KEYUP","EVENT_SEARCH","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_CLEANER","CLASS_NAME_DISABLED","CLASS_NAME_INPUT_GROUP","CLASS_NAME_LABEL","CLASS_NAME_SELECT","CLASS_NAME_SELECT_DROPDOWN","CLASS_NAME_SELECT_ALL","CLASS_NAME_OPTGROUP","CLASS_NAME_OPTGROUP_LABEL","CLASS_NAME_OPTION","CLASS_NAME_OPTION_WITH_CHECKBOX","CLASS_NAME_OPTIONS","CLASS_NAME_OPTIONS_EMPTY","CLASS_NAME_SEARCH","CLASS_NAME_SELECTED","CLASS_NAME_SELECTION","CLASS_NAME_SELECTION_TAGS","CLASS_NAME_SHOW","CLASS_NAME_TAG","CLASS_NAME_TAG_DELETE","Default","allowList","DefaultAllowlist","ariaCleanerLabel","ariaIndicatorLabel","cleaner","clearSearchOnSelect","container","disabled","id","invalid","multiple","name","options","optionsGroupsTemplate","optionsMaxHeight","optionsStyle","optionsTemplate","placeholder","required","sanitize","sanitizeFn","search","searchNoResultsLabel","selectAll","selectAllLabel","selectionType","selectionTypeCounterText","valid","value","DefaultType","MultiSelect","BaseComponent","constructor","element","config","_uniqueId","_config","_element","getUID","_uniqueName","_configureNativeSelect","_indicatorElement","_selectAllElement","_selectionElement","_selectionCleanerElement","_searchElement","_togglerElement","_optionsElement","_clone","_menu","_selected","_options","_getOptions","_popper","_search","length","_createNativeOptions","_createSelect","_addEventListeners","Data","set","toggle","_isShown","hide","show","EventHandler","trigger","classList","add","setAttribute","style","minWidth","offsetWidth","_createPopper","SelectorEngine","findOne","focus","destroy","_onSearchChange","remove","dispose","text","toLowerCase","_filterOptionsList","update","deselectAll","_configAfterMerge","innerHTML","option","label","_selectOption","_deselectOption","getValue","on","event","key","preventDefault","_selectMenuItem","stopPropagation","selectionStart","target","_deselectLastOption","_onOptionsClick","includes","_getClassNames","split","_getOptionsFromConfig","_getOptionsFromElement","Array","isArray","customGroupProperties","push","String","isSelected","selected","customProperties","node","nodes","from","childNodes","filter","nodeName","parentElement","opt","document","createElement","append","optgroup","_hideNativeSelect","tabIndex","display","multiSelectEl","role","className","parentNode","insertBefore","nextSibling","_createSelection","_createButtons","_createSearchInput","_updateSearch","_createOptionsContainer","_updateOptionsList","togglerEl","selectionEl","_updateSelection","buttons","type","indicator","_updateSelectionCleaner","Popper","TypeError","popperConfig","modifiers","boundary","offset","placement","isRTL","createPopper","input","_updateSearchSize","dropdownDiv","selectAllButton","optionsDiv","maxHeight","overflow","_createOptions","optionDiv","dataset","sanitizeHtml","textContent","optgrouplabel","_createTag","tag","closeBtn","contains","closest","_findOptionByValue","found","nativeOption","last","findLast","selection","map","index","join","selectionCleaner","removeProperty","removeAttribute","size","_isVisible","window","getComputedStyle","find","visibleOptions","indexOf","children","items","isVisible","getNextActiveElement","body","getElement","multiSelectInterface","data","getOrCreateInstance","jQueryInterface","each","clearMenus","button","selects","i","len","context","get","relatedTarget","ms","defineJQueryPlugin"],"mappings":"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"}