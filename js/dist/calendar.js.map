{"version":3,"file":"calendar.js","sources":["../src/calendar.js"],"sourcesContent":["/* eslint-disable complexity, indent, multiline-ternary, @stylistic/multiline-ternary */\n/**\n * --------------------------------------------------------------------------\n * CoreUI PRO calendar.js\n * License (https://coreui.io/pro/license/)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\nimport {\n  convertToDateObject,\n  createGroupsInArray,\n  getCalendarDate,\n  getDateBySelectionType,\n  getMonthDetails,\n  getMonthsNames,\n  getYears,\n  isDateDisabled,\n  isDateInRange,\n  isDateSelected,\n  isDisableDateInRange,\n  isMonthDisabled,\n  isMonthInRange,\n  isMonthSelected,\n  isToday,\n  isYearDisabled,\n  isYearInRange,\n  isYearSelected,\n  setTimeFromDate\n} from './util/calendar.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'calendar'\nconst DATA_KEY = 'coreui.calendar'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ENTER_KEY = 'Enter'\nconst SPACE_KEY = 'Space'\n\nconst EVENT_BLUR = `blur${EVENT_KEY}`\nconst EVENT_CALENDAR_DATE_CHANGE = `calendarDateChange${EVENT_KEY}`\nconst EVENT_CALENDAR_MOUSE_LEAVE = `calendarMouseleave${EVENT_KEY}`\nconst EVENT_CELL_HOVER = `cellHover${EVENT_KEY}`\nconst EVENT_END_DATE_CHANGE = `endDateChange${EVENT_KEY}`\nconst EVENT_FOCUS = `focus${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_SELECT_END_CHANGE = `selectEndChange${EVENT_KEY}`\nconst EVENT_START_DATE_CHANGE = `startDateChange${EVENT_KEY}`\nconst EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`\nconst EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CALENDAR_CELL = 'calendar-cell'\nconst CLASS_NAME_CALENDAR_CELL_INNER = 'calendar-cell-inner'\nconst CLASS_NAME_CALENDAR_ROW = 'calendar-row'\nconst CLASS_NAME_CALENDARS = 'calendars'\nconst CLASS_NAME_SHOW_WEEK_NUMBERS = 'show-week-numbers'\n\nconst SELECTOR_BTN_DOUBLE_NEXT = '.btn-double-next'\nconst SELECTOR_BTN_DOUBLE_PREV = '.btn-double-prev'\nconst SELECTOR_BTN_MONTH = '.btn-month'\nconst SELECTOR_BTN_NEXT = '.btn-next'\nconst SELECTOR_BTN_PREV = '.btn-prev'\nconst SELECTOR_BTN_YEAR = '.btn-year'\nconst SELECTOR_CALENDAR = '.calendar'\nconst SELECTOR_CALENDAR_CELL = '.calendar-cell'\nconst SELECTOR_CALENDAR_CELL_CLICKABLE = `${SELECTOR_CALENDAR_CELL}[tabindex=\"0\"]`\nconst SELECTOR_CALENDAR_ROW = '.calendar-row'\nconst SELECTOR_CALENDAR_ROW_CLICKABLE = `${SELECTOR_CALENDAR_ROW}[tabindex=\"0\"]`\nconst SELECTOR_DATA_TOGGLE = '[data-coreui-toggle=\"calendar\"]'\n\nconst Default = {\n  ariaNavNextMonthLabel: 'Next month',\n  ariaNavNextYearLabel: 'Next year',\n  ariaNavPrevMonthLabel: 'Previous month',\n  ariaNavPrevYearLabel: 'Previous year',\n  calendarDate: null,\n  calendars: 1,\n  disabledDates: null,\n  endDate: null,\n  firstDayOfWeek: 1,\n  locale: 'default',\n  maxDate: null,\n  minDate: null,\n  range: false,\n  selectAdjacementDays: false,\n  selectEndDate: false,\n  selectionType: 'day',\n  showAdjacementDays: true,\n  showWeekNumber: false,\n  startDate: null,\n  weekdayFormat: 2,\n  weekNumbersLabel: null\n}\n\nconst DefaultType = {\n  ariaNavNextMonthLabel: 'string',\n  ariaNavNextYearLabel: 'string',\n  ariaNavPrevMonthLabel: 'string',\n  ariaNavPrevYearLabel: 'string',\n  calendarDate: '(date|number|string|null)',\n  calendars: 'number',\n  disabledDates: '(array|date|function|null)',\n  endDate: '(date|number|string|null)',\n  firstDayOfWeek: 'number',\n  locale: 'string',\n  maxDate: '(date|number|string|null)',\n  minDate: '(date|number|string|null)',\n  range: 'boolean',\n  selectAdjacementDays: 'boolean',\n  selectEndDate: 'boolean',\n  selectionType: 'string',\n  showAdjacementDays: 'boolean',\n  showWeekNumber: 'boolean',\n  startDate: '(date|number|string|null)',\n  weekdayFormat: '(number|string)',\n  weekNumbersLabel: '(string|null)'\n}\n\n/**\n * Class definition\n */\n\nclass Calendar extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._initializeDates()\n    this._initializeView()\n    this._createCalendar()\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  update(config) {\n    this._config = this._getConfig(config)\n    this._initializeDates()\n    this._initializeView()\n\n    // Clear the current calendar content\n    this._element.innerHTML = ''\n    this._createCalendar()\n  }\n\n  // Private\n  _focusOnFirstAvailableCell() {\n    const cell = SelectorEngine.findOne(SELECTOR_CALENDAR_CELL_CLICKABLE, this._element)\n\n    if (cell) {\n      cell.focus()\n    }\n  }\n\n  _getDate(target) {\n    if (this._config.selectionType === 'week') {\n      const firstCell = SelectorEngine.findOne(SELECTOR_CALENDAR_CELL, target.closest(SELECTOR_CALENDAR_ROW))\n      return new Date(Manipulator.getDataAttribute(firstCell, 'date'))\n    }\n\n    return new Date(Manipulator.getDataAttribute(target, 'date'))\n  }\n\n  _handleCalendarClick(event) {\n    const target = event.target.classList.contains(CLASS_NAME_CALENDAR_CELL_INNER) ? event.target.parentElement : event.target\n    const date = this._getDate(target)\n    const cloneDate = new Date(date)\n    const index = Manipulator.getDataAttribute(target.closest(SELECTOR_CALENDAR), 'calendar-index')\n\n    if (this._view === 'days') {\n      this._setCalendarDate(index ? new Date(cloneDate.setMonth(cloneDate.getMonth() - index)) : date)\n    }\n\n    if (this._view === 'months' && this._config.selectionType !== 'month') {\n      this._setCalendarDate(index ? new Date(cloneDate.setMonth(cloneDate.getMonth() - index)) : date)\n      this._view = 'days'\n      this._updateCalendar(this._focusOnFirstAvailableCell.bind(this))\n      return\n    }\n\n    if (this._view === 'years' && this._config.selectionType !== 'year') {\n      this._setCalendarDate(index ? new Date(cloneDate.setFullYear(cloneDate.getFullYear() - index)) : date)\n      this._view = 'months'\n      this._updateCalendar(this._focusOnFirstAvailableCell.bind(this))\n      return\n    }\n\n    // Allow to change the calendarDate but not startDate or endDate\n    if (isDateDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)) {\n      return\n    }\n\n    this._hoverDate = null\n    this._selectDate(date)\n    this._updateClassNamesAndAriaLabels()\n  }\n\n  _handleCalendarKeydown(event) {\n    const date = this._getDate(event.target)\n\n    if (event.code === SPACE_KEY || event.key === ENTER_KEY) {\n      event.preventDefault()\n      this._handleCalendarClick(event)\n    }\n\n    if (\n      event.key === ARROW_RIGHT_KEY ||\n      event.key === ARROW_LEFT_KEY ||\n      event.key === ARROW_UP_KEY ||\n      event.key === ARROW_DOWN_KEY\n    ) {\n      event.preventDefault()\n\n      if (\n        this._maxDate &&\n        date >= convertToDateObject(this._maxDate, this._config.selectionType) &&\n        (event.key === ARROW_RIGHT_KEY || event.key === ARROW_DOWN_KEY)\n      ) {\n        return\n      }\n\n      if (\n        this._minDate &&\n        date <= convertToDateObject(this._minDate, this._config.selectionType) &&\n        (event.key === ARROW_LEFT_KEY || event.key === ARROW_UP_KEY)\n      ) {\n        return\n      }\n\n      let element = event.target\n\n      if (this._config.selectionType === 'week' && element.tabIndex === -1) {\n        element = element.closest(SELECTOR_CALENDAR_ROW_CLICKABLE)\n      }\n\n      const list = SelectorEngine.find(\n        this._config.selectionType === 'week' ? SELECTOR_CALENDAR_ROW_CLICKABLE : SELECTOR_CALENDAR_CELL_CLICKABLE,\n        this._element\n      )\n\n      const index = list.indexOf(element)\n      const first = index === 0\n      const last = index === list.length - 1\n\n      const toBoundary = {\n        start: index,\n        end: list.length - (index + 1)\n      }\n\n      const gap = {\n        ArrowRight: 1,\n        ArrowLeft: -1,\n        ArrowUp: this._config.selectionType === 'week' && this._view === 'days' ? -1 : (this._view === 'days' ? -7 : -3),\n        ArrowDown: this._config.selectionType === 'week' && this._view === 'days' ? 1 : (this._view === 'days' ? 7 : 3)\n      }\n\n      if (\n        (event.key === ARROW_RIGHT_KEY && last) ||\n        (event.key === ARROW_DOWN_KEY && toBoundary.end < gap.ArrowDown) ||\n        (event.key === ARROW_LEFT_KEY && first) ||\n        (event.key === ARROW_UP_KEY && toBoundary.start < Math.abs(gap.ArrowUp))\n      ) {\n        const callback = key => {\n          const _list = SelectorEngine.find(`${SELECTOR_CALENDAR_CELL_CLICKABLE}, ${SELECTOR_CALENDAR_ROW_CLICKABLE}`, this._element)\n\n          if (_list.length && key === ARROW_RIGHT_KEY) {\n            _list[0].focus()\n          }\n\n          if (_list.length && key === ARROW_LEFT_KEY) {\n            _list[_list.length - 1].focus()\n          }\n\n          if (_list.length && key === ARROW_DOWN_KEY) {\n            _list[gap.ArrowDown - (list.length - index)].focus()\n          }\n\n          if (_list.length && key === ARROW_UP_KEY) {\n            _list[_list.length - (Math.abs(gap.ArrowUp) + 1 - (index + 1))].focus()\n          }\n        }\n\n        if (this._view === 'days') {\n          this._modifyCalendarDate(0, event.key === ARROW_RIGHT_KEY || event.key === ARROW_DOWN_KEY ? 1 : -1, callback.bind(this, event.key))\n        }\n\n        if (this._view === 'months') {\n          this._modifyCalendarDate(event.key === ARROW_RIGHT_KEY || event.key === ARROW_DOWN_KEY ? 1 : -1, 0, callback.bind(this, event.key))\n        }\n\n        if (this._view === 'years') {\n          this._modifyCalendarDate(event.key === ARROW_RIGHT_KEY || event.key === ARROW_DOWN_KEY ? 10 : -10, 0, callback.bind(this, event.key))\n        }\n\n        return\n      }\n\n      if (list[index + gap[event.key]].tabIndex === 0) {\n        list[index + gap[event.key]].focus()\n        return\n      }\n\n      for (let i = index; i < list.length; event.key === ARROW_RIGHT_KEY || event.key === ARROW_DOWN_KEY ? i++ : i--) {\n        if (list[i + gap[event.key]].tabIndex === 0) {\n          list[i + gap[event.key]].focus()\n          break\n        }\n      }\n    }\n  }\n\n  _handleCalendarMouseEnter(event) {\n    const target = event.target.classList.contains(CLASS_NAME_CALENDAR_CELL_INNER) ? event.target.parentElement : event.target\n    const date = this._getDate(target)\n\n    if (isDateDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)) {\n      return\n    }\n\n    this._hoverDate = setTimeFromDate(date, this._selectEndDate ? this._endDate : this._startDate)\n\n    EventHandler.trigger(this._element, EVENT_CELL_HOVER, {\n      date: getDateBySelectionType(this._hoverDate, this._config.selectionType)\n    })\n\n    this._updateClassNamesAndAriaLabels()\n  }\n\n  _handleCalendarMouseLeave() {\n    this._hoverDate = null\n\n    EventHandler.trigger(this._element, EVENT_CELL_HOVER, {\n      date: null\n    })\n\n    this._updateClassNamesAndAriaLabels()\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_CLICK_DATA_API, SELECTOR_CALENDAR_CELL_CLICKABLE, event => {\n      this._handleCalendarClick(event)\n    })\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, SELECTOR_CALENDAR_CELL_CLICKABLE, event => {\n      this._handleCalendarKeydown(event)\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEENTER, SELECTOR_CALENDAR_CELL_CLICKABLE, event => {\n      this._handleCalendarMouseEnter(event)\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSELEAVE, SELECTOR_CALENDAR_CELL_CLICKABLE, () => {\n      this._handleCalendarMouseLeave()\n    })\n\n    EventHandler.on(this._element, EVENT_FOCUS, SELECTOR_CALENDAR_CELL_CLICKABLE, event => {\n      this._handleCalendarMouseEnter(event)\n    })\n\n    EventHandler.on(this._element, EVENT_BLUR, SELECTOR_CALENDAR_CELL_CLICKABLE, () => {\n      this._handleCalendarMouseLeave()\n    })\n\n    EventHandler.on(this._element, EVENT_CLICK_DATA_API, SELECTOR_CALENDAR_ROW_CLICKABLE, event => {\n      this._handleCalendarClick(event)\n    })\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, SELECTOR_CALENDAR_ROW_CLICKABLE, event => {\n      this._handleCalendarKeydown(event)\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEENTER, SELECTOR_CALENDAR_ROW_CLICKABLE, event => {\n      this._handleCalendarMouseEnter(event)\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSELEAVE, SELECTOR_CALENDAR_ROW_CLICKABLE, () => {\n      this._handleCalendarMouseLeave()\n    })\n\n    EventHandler.on(this._element, EVENT_FOCUS, SELECTOR_CALENDAR_ROW_CLICKABLE, event => {\n      this._handleCalendarMouseEnter(event)\n    })\n\n    EventHandler.on(this._element, EVENT_BLUR, SELECTOR_CALENDAR_ROW_CLICKABLE, () => {\n      this._handleCalendarMouseLeave()\n    })\n\n    // Navigation\n    this._addNavigationEventListeners()\n\n    EventHandler.on(this._element, EVENT_MOUSELEAVE, 'table', () => {\n      EventHandler.trigger(this._element, EVENT_CALENDAR_MOUSE_LEAVE)\n    })\n  }\n\n  _addNavigationEventListeners() {\n    const navigationSelectors = {\n      [SELECTOR_BTN_PREV]: () => this._modifyCalendarDate(0, -1),\n      [SELECTOR_BTN_DOUBLE_PREV]: () => this._modifyCalendarDate(this._view === 'years' ? -10 : -1),\n      [SELECTOR_BTN_NEXT]: () => this._modifyCalendarDate(0, 1),\n      [SELECTOR_BTN_DOUBLE_NEXT]: () => this._modifyCalendarDate(this._view === 'years' ? 10 : 1),\n      [SELECTOR_BTN_MONTH]: () => {\n        this._view = 'months'\n        this._updateCalendar()\n      },\n      [SELECTOR_BTN_YEAR]: () => {\n        this._view = 'years'\n        this._updateCalendar()\n      }\n    }\n\n    for (const [selector, handler] of Object.entries(navigationSelectors)) {\n      EventHandler.on(this._element, EVENT_CLICK_DATA_API, selector, event => {\n        event.preventDefault()\n        const selectors = SelectorEngine.find(selector, this._element)\n        const selectorIndex = selectors.indexOf(event.target.closest(selector))\n        handler()\n\n        // Retrieve focus to the navigation element\n        const _selectors = SelectorEngine.find(selector, this._element)\n        if (_selectors && _selectors[selectorIndex]) {\n          _selectors[selectorIndex].focus()\n        }\n      })\n    }\n  }\n\n  _setCalendarDate(date) {\n    this._calendarDate = date\n\n    EventHandler.trigger(this._element, EVENT_CALENDAR_DATE_CHANGE, {\n      date\n    })\n  }\n\n  _modifyCalendarDate(years, months = 0, callback) {\n    const year = this._calendarDate.getFullYear()\n    const month = this._calendarDate.getMonth()\n    const d = new Date(year, month, 1)\n\n    if (years) {\n      d.setFullYear(d.getFullYear() + years)\n    }\n\n    if (months) {\n      d.setMonth(d.getMonth() + months)\n    }\n\n    this._calendarDate = d\n\n    if (this._view === 'days') {\n      EventHandler.trigger(this._element, EVENT_CALENDAR_DATE_CHANGE, {\n        date: d\n      })\n    }\n\n    this._updateCalendar(callback)\n  }\n\n  _setEndDate(date) {\n    this._endDate = setTimeFromDate(date, this._endDate)\n    EventHandler.trigger(this._element, EVENT_END_DATE_CHANGE, {\n      date: getDateBySelectionType(this._endDate, this._config.selectionType)\n    })\n  }\n\n  _setStartDate(date) {\n    this._startDate = setTimeFromDate(date, this._startDate)\n    EventHandler.trigger(this._element, EVENT_START_DATE_CHANGE, {\n      date: getDateBySelectionType(this._startDate, this._config.selectionType)\n    })\n  }\n\n  _setSelectEndDate(value) {\n    this._selectEndDate = value\n    EventHandler.trigger(this._element, EVENT_SELECT_END_CHANGE, {\n      value\n    })\n  }\n\n  _selectDate(date) {\n    if (isDateDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)) {\n      return\n    }\n\n    if (this._config.range) {\n      if (this._selectEndDate) {\n        this._setSelectEndDate(false)\n\n        if (this._startDate && this._startDate > date) {\n          this._setStartDate(null)\n          this._setEndDate(null)\n          return\n        }\n\n        if (isDisableDateInRange(this._startDate, date, this._config.disabledDates)) {\n          this._setStartDate(null)\n          this._setEndDate(null)\n          return\n        }\n\n        this._setEndDate(date)\n        return\n      }\n\n      if (this._endDate && this._endDate < date) {\n        this._setStartDate(null)\n        this._setEndDate(null)\n        return\n      }\n\n      if (isDisableDateInRange(date, this._endDate, this._config.disabledDates)) {\n        this._setStartDate(null)\n        this._setEndDate(null)\n        return\n      }\n\n      this._setSelectEndDate(true)\n      this._setStartDate(date)\n      return\n    }\n\n    this._setStartDate(date)\n  }\n\n  _createCalendarPanel(order) {\n    const calendarDate = getCalendarDate(this._calendarDate, order, this._view)\n    const year = calendarDate.getFullYear()\n    const month = calendarDate.getMonth()\n\n    const calendarPanelEl = document.createElement('div')\n    calendarPanelEl.classList.add('calendar')\n\n    Manipulator.setDataAttribute(calendarPanelEl, 'calendar-index', order)\n\n    // Create navigation\n    const navigationElement = document.createElement('div')\n    navigationElement.classList.add('calendar-nav')\n    navigationElement.innerHTML = `\n      <div class=\"calendar-nav-prev\">\n        <button class=\"btn btn-transparent btn-sm btn-double-prev\" aria-label=\"${this._config.ariaNavPrevYearLabel}\">\n          <span class=\"calendar-nav-icon calendar-nav-icon-double-prev\"></span>\n        </button>\n        ${this._view === 'days' ? `<button class=\"btn btn-transparent btn-sm btn-prev\" aria-label=\"${this._config.ariaNavPrevMonthLabel}\">\n          <span class=\"calendar-nav-icon calendar-nav-icon-prev\"></span>\n        </button>` : ''}\n      </div>\n      <div class=\"calendar-nav-date\" aria-live=\"polite\">\n        ${this._view === 'days' ? `<button class=\"btn btn-transparent btn-sm btn-month\">\n          ${calendarDate.toLocaleDateString(this._config.locale, { month: 'long' })}\n        </button>` : ''}\n        <button class=\"btn btn-transparent btn-sm btn-year\">\n          ${calendarDate.toLocaleDateString(this._config.locale, { year: 'numeric' })}\n        </button>\n      </div>\n      <div class=\"calendar-nav-next\">\n        ${this._view === 'days' ? `<button class=\"btn btn-transparent btn-sm btn-next\" aria-label=\"${this._config.ariaNavNextMonthLabel}\">\n          <span class=\"calendar-nav-icon calendar-nav-icon-next\"></span>\n        </button>` : ''}\n        <button class=\"btn btn-transparent btn-sm btn-double-next\" aria-label=\"${this._config.ariaNavNextYearLabel}\">\n          <span class=\"calendar-nav-icon calendar-nav-icon-double-next\"></span>\n        </button>\n      </div>\n    `\n\n    const monthDetails = getMonthDetails(year, month, this._config.firstDayOfWeek)\n    const listOfMonths = createGroupsInArray(getMonthsNames(this._config.locale), 4)\n    const listOfYears = createGroupsInArray(getYears(calendarDate.getFullYear()), 4)\n    const weekDays = monthDetails[0].days\n\n    const calendarTable = document.createElement('table')\n    calendarTable.innerHTML = `\n    ${this._view === 'days' ? `\n      <thead>\n        <tr>\n          ${this._config.showWeekNumber ?\n            `<th class=\"${CLASS_NAME_CALENDAR_CELL}\">\n              <div class=\"calendar-header-cell-inner\">\n               ${this._config.weekNumbersLabel ?? ''}\n              </div>\n            </th>` : ''\n          }\n          ${weekDays.map(({ date }) => (\n            `<th class=\"${CLASS_NAME_CALENDAR_CELL}\" abbr=\"${date.toLocaleDateString(this._config.locale, { weekday: 'long' })}\">\n              <div class=\"calendar-header-cell-inner\">\n              ${typeof this._config.weekdayFormat === 'string' ?\n                date.toLocaleDateString(this._config.locale, { weekday: this._config.weekdayFormat }) :\n                date\n                  .toLocaleDateString(this._config.locale, { weekday: 'long' })\n                  .slice(0, this._config.weekdayFormat)}\n              </div>\n            </th>`\n          )).join('')}\n        </tr>\n      </thead>` : ''}\n      <tbody>\n        ${this._view === 'days' ? monthDetails.map(week => {\n          const date = convertToDateObject(\n            week.weekNumber === 0 ?\n              `${calendarDate.getFullYear()}W53` :\n              `${calendarDate.getFullYear()}W${week.weekNumber}`,\n            this._config.selectionType\n          )\n          const rowAttributes = this._rowWeekAttributes(date)\n          return (\n            `<tr \n              class=\"${rowAttributes.className}\"\n              tabindex=\"${rowAttributes.tabIndex}\"\n              ${rowAttributes.ariaSelected ? 'aria-selected=\"true\"' : ''}\n            >\n              ${this._config.showWeekNumber ?\n                `<th class=\"calendar-cell-week-number\">${week.weekNumber === 0 ? 53 : week.weekNumber}</td>` : ''\n              }\n              ${week.days.map(({ date, month }) => {\n                const cellAttributes = this._cellDayAttributes(date, month)\n                return month === 'current' || this._config.showAdjacementDays ?\n                  `<td \n                    class=\"${cellAttributes.className}\"\n                    tabindex=\"${cellAttributes.tabIndex}\"\n                    ${cellAttributes.ariaSelected ? 'aria-selected=\"true\"' : ''}\n                    data-coreui-date=\"${date}\"\n                  >\n                    <div class=\"calendar-cell-inner day\">\n                      ${date.toLocaleDateString(this._config.locale, { day: 'numeric' })}\n                    </div>\n                  </td>` :\n                  '<td></td>'\n              }\n            ).join('')}</tr>`\n          )\n        }).join('') : ''}\n        ${this._view === 'months' ? listOfMonths.map((row, index) => (\n          `<tr>\n            ${row.map((month, idx) => {\n              const date = new Date(calendarDate.getFullYear(), (index * 3) + idx, 1)\n              const cellAttributes = this._cellMonthAttributes(date)\n              return (\n                `<td\n                  class=\"${cellAttributes.className}\"\n                  tabindex=\"${cellAttributes.tabIndex}\"\n                  ${cellAttributes.ariaSelected ? 'aria-selected=\"true\"' : ''}\n                  data-coreui-date=\"${date.toDateString()}\"\n                >\n                  <div class=\"calendar-cell-inner month\">\n                    ${month}\n                  </div>\n                </td>`\n              )\n            }).join('')}\n          </tr>`\n        )).join('') : ''}\n        ${this._view === 'years' ? listOfYears.map(row => (\n          `<tr>\n            ${row.map(year => {\n              const date = new Date(year, 0, 1)\n              const cellAttributes = this._cellYearAttributes(date)\n              return (\n                `<td\n                  class=\"${cellAttributes.className}\"\n                  tabindex=\"${cellAttributes.tabIndex}\"\n                  ${cellAttributes.ariaSelected ? 'aria-selected=\"true\"' : ''}\n                  data-coreui-date=\"${date.toDateString()}\"\n                >\n                  <div class=\"calendar-cell-inner year\">\n                    ${year}\n                  </div>\n                </td>`\n              )\n            }).join('')}\n          </tr>`\n        )).join('') : ''}\n      </tbody>\n    `\n    calendarPanelEl.append(navigationElement, calendarTable)\n\n    return calendarPanelEl\n  }\n\n  _createCalendar() {\n    if (this._config.selectionType && this._view === 'days') {\n      this._element.classList.add(`select-${this._config.selectionType}`)\n    }\n\n    if (this._config.showWeekNumber) {\n      this._element.classList.add(CLASS_NAME_SHOW_WEEK_NUMBERS)\n    }\n\n    for (const [index, _] of Array.from({ length: this._config.calendars }).entries()) {\n      this._element.append(this._createCalendarPanel(index))\n    }\n\n    this._element.classList.add(CLASS_NAME_CALENDARS)\n  }\n\n  _initializeDates() {\n    // Convert dates to date objects based on the selection type\n    this._calendarDate = convertToDateObject(\n      this._config.calendarDate || this._config.startDate || this._config.endDate || new Date(), this._config.selectionType\n    )\n    this._startDate = convertToDateObject(this._config.startDate, this._config.selectionType)\n    this._endDate = convertToDateObject(this._config.endDate, this._config.selectionType)\n    this._minDate = convertToDateObject(this._config.minDate, this._config.selectionType)\n    this._maxDate = convertToDateObject(this._config.maxDate, this._config.selectionType)\n    this._hoverDate = null\n    this._selectEndDate = this._config.selectEndDate\n  }\n\n  _initializeView() {\n    const viewMap = {\n      day: 'days',\n      week: 'days',\n      month: 'months',\n      year: 'years'\n    }\n\n    this._view = viewMap[this._config.selectionType] || 'days'\n  }\n\n  _updateCalendar(callback) {\n    this._element.innerHTML = ''\n    this._createCalendar()\n\n    if (callback) {\n      setTimeout(callback, 1)\n    }\n  }\n\n  _updateClassNamesAndAriaLabels() {\n    if (this._config.selectionType === 'week') {\n      const rows = SelectorEngine.find(SELECTOR_CALENDAR_ROW, this._element)\n\n      for (const row of rows) {\n        const firstCell = SelectorEngine.findOne(SELECTOR_CALENDAR_CELL, row)\n        const date = new Date(Manipulator.getDataAttribute(firstCell, 'date'))\n        const rowAttributes = this._rowWeekAttributes(date)\n\n        row.className = rowAttributes.className\n        row.tabIndex = rowAttributes.tabIndex\n\n        if (rowAttributes.ariaSelected) {\n          row.setAttribute('aria-selected', true)\n        } else {\n          row.removeAttribute('aria-selected')\n        }\n      }\n\n      return\n    }\n\n    const cells = SelectorEngine.find(SELECTOR_CALENDAR_CELL_CLICKABLE, this._element)\n\n    for (const cell of cells) {\n      const date = new Date(Manipulator.getDataAttribute(cell, 'date'))\n      let cellAttributes\n\n      if (this._view === 'days') {\n        cellAttributes = this._cellDayAttributes(date, 'current')\n      } else if (this._view === 'months') {\n        cellAttributes = this._cellMonthAttributes(date)\n      } else {\n        cellAttributes = this._cellYearAttributes(date)\n      }\n\n      cell.className = cellAttributes.className\n      cell.tabIndex = cellAttributes.tabIndex\n\n      if (cellAttributes.ariaSelected) {\n        cell.setAttribute('aria-selected', true)\n      } else {\n        cell.removeAttribute('aria-selected')\n      }\n    }\n  }\n\n  _classNames(classNames) {\n    return Object.entries(classNames)\n      .filter(([_, value]) => Boolean(value))\n      .map(([key]) => key)\n      .join(' ')\n  }\n\n  _cellDayAttributes(date, month) {\n    const isCurrentMonth = month === 'current'\n    const isDisabled = isDateDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)\n    const isSelected = isDateSelected(date, this._startDate, this._endDate)\n\n    const classNames = this._classNames({\n      [CLASS_NAME_CALENDAR_CELL]: true,\n      ...(this._config.selectionType === 'day' && this._view === 'days' && {\n        clickable: !isCurrentMonth && this._config.selectAdjacementDays,\n        disabled: isDisabled,\n        range: isCurrentMonth && isDateInRange(date, this._startDate, this._endDate),\n        'range-hover': isCurrentMonth &&\n          (this._hoverDate && this._selectEndDate ?\n            isDateInRange(date, this._startDate, this._hoverDate) :\n            isDateInRange(date, this._hoverDate, this._endDate)),\n        selected: isSelected\n      }),\n      today: isToday(date),\n      [month]: true\n    })\n\n    return {\n      className: classNames,\n      tabIndex: this._config.selectionType === 'day' &&\n        (isCurrentMonth || this._config.selectAdjacementDays) &&\n        !isDisabled ? 0 : -1,\n      ariaSelected: isSelected\n    }\n  }\n\n  _cellMonthAttributes(date) {\n    const isDisabled = isMonthDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)\n    const isSelected = isMonthSelected(date, this._startDate, this._endDate)\n\n    const classNames = this._classNames({\n      [CLASS_NAME_CALENDAR_CELL]: true,\n      disabled: isDisabled,\n      'range-hover': this._config.selectionType === 'month' &&\n        (this._hoverDate && this._selectEndDate ?\n          isMonthInRange(date, this._startDate, this._hoverDate) :\n          isMonthInRange(date, this._hoverDate, this._endDate)),\n      range: isMonthInRange(date, this._startDate, this._endDate),\n      selected: isSelected\n    })\n\n    return {\n      className: classNames,\n      tabIndex: isDisabled ? -1 : 0,\n      ariaSelected: isSelected\n    }\n  }\n\n  _cellYearAttributes(date) {\n    const isDisabled = isYearDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)\n    const isSelected = isYearSelected(date, this._startDate, this._endDate)\n\n    const classNames = this._classNames({\n      [CLASS_NAME_CALENDAR_CELL]: true,\n      disabled: isDisabled,\n      'range-hover': this._config.selectionType === 'year' &&\n        (this._hoverDate && this._selectEndDate ?\n          isYearInRange(date, this._startDate, this._hoverDate) :\n          isYearInRange(date, this._hoverDate, this._endDate)),\n      range: isYearInRange(date, this._startDate, this._endDate),\n      selected: isSelected\n    })\n\n    return {\n      className: classNames,\n      tabIndex: isDisabled ? -1 : 0,\n      ariaSelected: isSelected\n    }\n  }\n\n  _rowWeekAttributes(date) {\n    const isDisabled = isDateDisabled(date, this._minDate, this._maxDate, this._config.disabledDates)\n    const isSelected = isDateSelected(date, this._startDate, this._endDate)\n\n    const classNames = this._classNames({\n      [CLASS_NAME_CALENDAR_ROW]: true,\n      disabled: isDisabled,\n      range: this._config.selectionType === 'week' && isDateInRange(date, this._startDate, this._endDate),\n      'range-hover': this._config.selectionType === 'week' &&\n        (this._hoverDate && this._selectEndDate ?\n          isYearInRange(date, this._startDate, this._hoverDate) :\n          isYearInRange(date, this._hoverDate, this._endDate)),\n      selected: isSelected\n    })\n\n    return {\n      className: classNames,\n      tabIndex: this._config.selectionType === 'week' && !isDisabled ? 0 : -1,\n      ariaSelected: isSelected\n    }\n  }\n\n  // Static\n\n  static calendarInterface(element, config) {\n    const data = Calendar.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Calendar.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of Array.from(document.querySelectorAll(SELECTOR_DATA_TOGGLE))) {\n    Calendar.calendarInterface(element)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Calendar)\n\nexport default Calendar\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ARROW_UP_KEY","ARROW_RIGHT_KEY","ARROW_DOWN_KEY","ARROW_LEFT_KEY","ENTER_KEY","SPACE_KEY","EVENT_BLUR","EVENT_CALENDAR_DATE_CHANGE","EVENT_CALENDAR_MOUSE_LEAVE","EVENT_CELL_HOVER","EVENT_END_DATE_CHANGE","EVENT_FOCUS","EVENT_KEYDOWN","EVENT_SELECT_END_CHANGE","EVENT_START_DATE_CHANGE","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_LOAD_DATA_API","EVENT_CLICK_DATA_API","CLASS_NAME_CALENDAR_CELL","CLASS_NAME_CALENDAR_CELL_INNER","CLASS_NAME_CALENDAR_ROW","CLASS_NAME_CALENDARS","CLASS_NAME_SHOW_WEEK_NUMBERS","SELECTOR_BTN_DOUBLE_NEXT","SELECTOR_BTN_DOUBLE_PREV","SELECTOR_BTN_MONTH","SELECTOR_BTN_NEXT","SELECTOR_BTN_PREV","SELECTOR_BTN_YEAR","SELECTOR_CALENDAR","SELECTOR_CALENDAR_CELL","SELECTOR_CALENDAR_CELL_CLICKABLE","SELECTOR_CALENDAR_ROW","SELECTOR_CALENDAR_ROW_CLICKABLE","SELECTOR_DATA_TOGGLE","Default","ariaNavNextMonthLabel","ariaNavNextYearLabel","ariaNavPrevMonthLabel","ariaNavPrevYearLabel","calendarDate","calendars","disabledDates","endDate","firstDayOfWeek","locale","maxDate","minDate","range","selectAdjacementDays","selectEndDate","selectionType","showAdjacementDays","showWeekNumber","startDate","weekdayFormat","weekNumbersLabel","DefaultType","Calendar","BaseComponent","constructor","element","config","_config","_getConfig","_initializeDates","_initializeView","_createCalendar","_addEventListeners","update","_element","innerHTML","_focusOnFirstAvailableCell","cell","SelectorEngine","findOne","focus","_getDate","target","firstCell","closest","Date","Manipulator","getDataAttribute","_handleCalendarClick","event","classList","contains","parentElement","date","cloneDate","index","_view","_setCalendarDate","setMonth","getMonth","_updateCalendar","bind","setFullYear","getFullYear","isDateDisabled","_minDate","_maxDate","_hoverDate","_selectDate","_updateClassNamesAndAriaLabels","_handleCalendarKeydown","code","key","preventDefault","convertToDateObject","tabIndex","list","find","indexOf","first","last","length","toBoundary","start","end","gap","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Math","abs","callback","_list","_modifyCalendarDate","i","_handleCalendarMouseEnter","setTimeFromDate","_selectEndDate","_endDate","_startDate","EventHandler","trigger","getDateBySelectionType","_handleCalendarMouseLeave","on","_addNavigationEventListeners","navigationSelectors","selector","handler","Object","entries","selectors","selectorIndex","_selectors","_calendarDate","years","months","year","month","d","_setEndDate","_setStartDate","_setSelectEndDate","value","isDisableDateInRange","_createCalendarPanel","order","_this$_config$weekNum","getCalendarDate","calendarPanelEl","document","createElement","add","setDataAttribute","navigationElement","toLocaleDateString","monthDetails","getMonthDetails","listOfMonths","createGroupsInArray","getMonthsNames","listOfYears","getYears","weekDays","days","calendarTable","map","weekday","slice","join","week","weekNumber","rowAttributes","_rowWeekAttributes","className","ariaSelected","cellAttributes","_cellDayAttributes","day","row","idx","_cellMonthAttributes","toDateString","_cellYearAttributes","append","_","Array","from","viewMap","setTimeout","rows","setAttribute","removeAttribute","cells","_classNames","classNames","filter","Boolean","isCurrentMonth","isDisabled","isSelected","isDateSelected","clickable","disabled","isDateInRange","selected","today","isToday","isMonthDisabled","isMonthSelected","isMonthInRange","isYearDisabled","isYearSelected","isYearInRange","calendarInterface","data","getOrCreateInstance","TypeError","jQueryInterface","each","window","querySelectorAll","defineJQueryPlugin"],"mappings":"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"}