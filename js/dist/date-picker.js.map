{"version":3,"file":"date-picker.js","sources":["../src/date-picker.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO date-picker.js\n * License (https://coreui.io/pro/license/)\n * --------------------------------------------------------------------------\n */\n\nimport DateRangePicker from './date-range-picker.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'date-picker'\nconst DATA_KEY = 'coreui.date-picker'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst EVENT_DATE_CHANGE = `dateChange${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_CALENDAR = '.calendar'\nconst SELECTOR_DATA_TOGGLE = '[data-coreui-toggle=\"date-picker\"]:not(.disabled):not(:disabled)'\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE}.${CLASS_NAME_SHOW}`\n\nconst Default = {\n  ...DateRangePicker.Default,\n  calendars: 1,\n  placeholder: ['Select date'],\n  range: false,\n  separator: false\n}\n\nconst DefaultType = {\n  ...DateRangePicker.DefaultType,\n  date: '(date|number|string|null)'\n}\n\n/**\n * Class definition\n */\n\nclass DatePicker extends DateRangePicker {\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Overrides\n  _addCalendarEventListeners() {\n    super._addCalendarEventListeners()\n    for (const calendar of SelectorEngine.find(SELECTOR_CALENDAR, this._element)) {\n      EventHandler.on(calendar, 'startDateChange.coreui.calendar', event => {\n        this._startDate = event.date\n        this._startInput.value = this._setInputValue(event.date)\n        this._selectEndDate = false\n        this._calendar.update(this._getCalendarConfig())\n\n        EventHandler.trigger(this._element, EVENT_DATE_CHANGE, {\n          date: event.date\n        })\n      })\n    }\n  }\n\n  // Static\n  static datePickerInterface(element, config) {\n    const data = DatePicker.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = DatePicker.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || (event.type === 'keyup' && event.key !== TAB_KEY)) {\n      return\n    }\n\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN)\n\n    for (const toggle of openToggles) {\n      const context = DatePicker.getInstance(toggle)\n\n      if (!context) {\n        continue\n      }\n\n      const composedPath = event.composedPath()\n\n      if (\n        composedPath.includes(context._element)\n      ) {\n        continue\n      }\n\n      const relatedTarget = { relatedTarget: context._element }\n\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      context.hide()\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const datePickers = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n  for (let i = 0, len = datePickers.length; i < len; i++) {\n    DatePicker.datePickerInterface(datePickers[i])\n  }\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, DatePicker.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, DatePicker.clearMenus)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(DatePicker)\n\nexport default DatePicker\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","EVENT_DATE_CHANGE","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_SHOW","SELECTOR_CALENDAR","SELECTOR_DATA_TOGGLE","SELECTOR_DATA_TOGGLE_SHOWN","Default","DateRangePicker","calendars","placeholder","range","separator","DefaultType","date","DatePicker","_addCalendarEventListeners","calendar","SelectorEngine","find","_element","EventHandler","on","event","_startDate","_startInput","value","_setInputValue","_selectEndDate","_calendar","update","_getCalendarConfig","trigger","datePickerInterface","element","config","data","getOrCreateInstance","TypeError","jQueryInterface","each","undefined","startsWith","clearMenus","button","type","key","openToggles","toggle","context","getInstance","composedPath","includes","relatedTarget","hide","window","datePickers","i","len","length","document","defineJQueryPlugin"],"mappings":"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"}