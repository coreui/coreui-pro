{"version":3,"file":"date-picker.js","sources":["../src/date-picker.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO date-picker.js\n * License (https://coreui.io/pro/license/)\n * --------------------------------------------------------------------------\n */\n\nimport DateRangePicker from './date-range-picker.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'date-picker'\nconst DATA_KEY = 'coreui.date-picker'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst EVENT_DATE_CHANGE = `dateChange${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_CALENDAR = '.calendar'\nconst SELECTOR_DATA_TOGGLE = '[data-coreui-toggle=\"date-picker\"]:not(.disabled):not(:disabled)'\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE}.${CLASS_NAME_SHOW}`\n\nconst Default = {\n  ...DateRangePicker.Default,\n  calendars: 1,\n  placeholder: ['Select date'],\n  range: false,\n  separator: false\n}\n\nconst DefaultType = {\n  ...DateRangePicker.DefaultType,\n  date: '(date|string|null)'\n}\n\n/**\n * Class definition\n */\n\nclass DatePicker extends DateRangePicker {\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Overrides\n  _addCalendarEventListeners() {\n    super._addCalendarEventListeners()\n    for (const calendar of SelectorEngine.find(SELECTOR_CALENDAR, this._element)) {\n      EventHandler.on(calendar, 'startDateChange.coreui.calendar', event => {\n        this._startDate = event.date\n        this._selectEndDate = event.selectEndDate\n        this._startInput.value = this._setInputValue(event.date)\n        this._calendar.update(this._getCalendarConfig())\n\n        EventHandler.trigger(this._element, EVENT_DATE_CHANGE, {\n          date: event.date\n        })\n      })\n    }\n  }\n\n  // Static\n\n  static datePickerInterface(element, config) {\n    const data = DatePicker.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = DatePicker.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || (event.type === 'keyup' && event.key !== TAB_KEY)) {\n      return\n    }\n\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN)\n\n    for (const toggle of openToggles) {\n      const context = DatePicker.getInstance(toggle)\n\n      if (!context) {\n        continue\n      }\n\n      const composedPath = event.composedPath()\n\n      if (\n        composedPath.includes(context._element)\n      ) {\n        continue\n      }\n\n      const relatedTarget = { relatedTarget: context._element }\n\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      context.hide()\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const datePickers = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n  for (let i = 0, len = datePickers.length; i < len; i++) {\n    DatePicker.datePickerInterface(datePickers[i])\n  }\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, DatePicker.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, DatePicker.clearMenus)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(DatePicker)\n\nexport default DatePicker\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","EVENT_DATE_CHANGE","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_SHOW","SELECTOR_CALENDAR","SELECTOR_DATA_TOGGLE","SELECTOR_DATA_TOGGLE_SHOWN","Default","DateRangePicker","calendars","placeholder","range","separator","DefaultType","date","DatePicker","_addCalendarEventListeners","calendar","SelectorEngine","find","_element","EventHandler","on","event","_startDate","_selectEndDate","selectEndDate","_startInput","value","_setInputValue","_calendar","update","_getCalendarConfig","trigger","datePickerInterface","element","config","data","getOrCreateInstance","TypeError","jQueryInterface","each","undefined","startsWith","clearMenus","button","type","key","openToggles","toggle","context","getInstance","composedPath","includes","relatedTarget","hide","window","datePickers","i","len","length","document","defineJQueryPlugin"],"mappings":"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"}