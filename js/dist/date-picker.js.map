{"version":3,"file":"date-picker.js","sources":["../src/date-picker.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI PRO date-picker.js\n * License (https://coreui.io/pro/license/)\n * --------------------------------------------------------------------------\n */\n\nimport DateRangePicker from './date-range-picker.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'date-picker'\nconst DATA_KEY = 'coreui.date-picker'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst TAB_KEY = 'Tab'\nconst RIGHT_MOUSE_BUTTON = 2\n\nconst EVENT_DATE_CHANGE = `dateChange${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_DATA_TOGGLE = '[data-coreui-toggle=\"date-picker\"]:not(.disabled):not(:disabled)'\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE}.${CLASS_NAME_SHOW}`\n\nconst Default = {\n  ...DateRangePicker.Default,\n  calendars: 1,\n  placeholder: ['Select date'],\n  range: false,\n  separator: false\n}\n\nconst DefaultType = {\n  ...DateRangePicker.DefaultType,\n  date: '(date|number|string|null)'\n}\n\n/**\n * Class definition\n */\n\nclass DatePicker extends DateRangePicker {\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Overrides\n  _addEventListeners() {\n    super._addEventListeners()\n\n    EventHandler.on(this._element, 'startDateChange.coreui.date-range-picker', event => {\n      EventHandler.trigger(this._element, EVENT_DATE_CHANGE, {\n        date: event.date\n      })\n    })\n\n    EventHandler.on(this._element, 'show.coreui.date-range-picker', () => {\n      EventHandler.trigger(this._element, EVENT_SHOW)\n    })\n\n    EventHandler.on(this._element, 'shown.coreui.date-range-picker', () => {\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n    })\n\n    EventHandler.on(this._element, 'hide.coreui.date-range-picker', () => {\n      EventHandler.trigger(this._element, EVENT_HIDE)\n    })\n\n    EventHandler.on(this._element, 'hidden.coreui.date-range-picker', () => {\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  // Static\n  static datePickerInterface(element, config) {\n    const data = DatePicker.getOrCreateInstance(element, config)\n\n    if (typeof config === 'string') {\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    }\n  }\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = DatePicker.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || (event.type === 'keyup' && event.key !== TAB_KEY)) {\n      return\n    }\n\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN)\n\n    for (const toggle of openToggles) {\n      const context = DatePicker.getInstance(toggle)\n\n      if (!context) {\n        continue\n      }\n\n      const composedPath = event.composedPath()\n\n      if (\n        composedPath.includes(context._element)\n      ) {\n        continue\n      }\n\n      const relatedTarget = { relatedTarget: context._element }\n\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      context.hide()\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const datePickers = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n  for (let i = 0, len = datePickers.length; i < len; i++) {\n    DatePicker.datePickerInterface(datePickers[i])\n  }\n})\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, DatePicker.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, DatePicker.clearMenus)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(DatePicker)\n\nexport default DatePicker\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","TAB_KEY","RIGHT_MOUSE_BUTTON","EVENT_DATE_CHANGE","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_CLICK_DATA_API","EVENT_KEYUP_DATA_API","EVENT_LOAD_DATA_API","CLASS_NAME_SHOW","SELECTOR_DATA_TOGGLE","SELECTOR_DATA_TOGGLE_SHOWN","Default","DateRangePicker","calendars","placeholder","range","separator","DefaultType","date","DatePicker","_addEventListeners","EventHandler","on","_element","event","trigger","datePickerInterface","element","config","data","getOrCreateInstance","TypeError","jQueryInterface","each","undefined","startsWith","clearMenus","button","type","key","openToggles","SelectorEngine","find","toggle","context","getInstance","composedPath","includes","relatedTarget","hide","window","datePickers","i","len","length","document","defineJQueryPlugin"],"mappings":"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"}