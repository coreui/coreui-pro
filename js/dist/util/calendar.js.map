{"version":3,"file":"calendar.js","sources":["../../src/util/calendar.js"],"sourcesContent":["/**\n * Converts an ISO week string to a Date object representing the Monday of that week.\n * @param isoWeek - The ISO week string (e.g., \"2023W05\" or \"2023w05\").\n * @returns The Date object for the Monday of the specified week, or null if invalid.\n */\nexport const convertIsoWeekToDate = isoWeek => {\n  const [year, week] = isoWeek.split(/[Ww]/)\n  const date = new Date(Number(year), 0, 4) // 4th Jan is always in week 1\n  date.setDate(\n    date.getDate() - (date.getDay() || 7) + 1 + ((Number(week) - 1) * 7)\n  )\n  return date\n}\n\n/**\n * Converts a date string or Date object to a Date object based on selection type.\n * @param date - The date to convert.\n * @param selectionType - The type of selection ('day', 'week', 'month', 'year').\n * @returns The corresponding Date object or null if invalid.\n */\nexport const convertToDateObject = (date, selectionType) => {\n  if (date === null) {\n    return null\n  }\n\n  if (date instanceof Date) {\n    return date\n  }\n\n  if (selectionType === 'week') {\n    return convertIsoWeekToDate(date)\n  }\n\n  if (selectionType === 'month' || selectionType === 'year') {\n    const _date = new Date(Date.parse(date))\n    const userTimezoneOffset = _date.getTimezoneOffset() * 60_000\n    return new Date(_date.getTime() + userTimezoneOffset)\n  }\n\n  return new Date(Date.parse(date))\n}\n\n/**\n * Creates groups from an array.\n * @param arr - The array to group.\n * @param numberOfGroups - Number of groups to create.\n * @returns An array of grouped arrays.\n */\nexport const createGroupsInArray = (arr, numberOfGroups) => {\n  const perGroup = Math.ceil(arr.length / numberOfGroups)\n  return Array.from({ length: numberOfGroups })\n    .fill('')\n    .map((_, i) => arr.slice(i * perGroup, (i + 1) * perGroup))\n}\n\n/**\n * Adjusts the calendar date based on order and view type.\n * @param calendarDate - The current calendar date.\n * @param order - The order to adjust by.\n * @param view - The current view type.\n * @returns The adjusted Date object.\n */\nexport const getCalendarDate = (calendarDate, order, view) => {\n  if (order !== 0 && view === 'days') {\n    return new Date(\n      calendarDate.getFullYear(),\n      calendarDate.getMonth() + order,\n      1\n    )\n  }\n\n  if (order !== 0 && view === 'months') {\n    return new Date(\n      calendarDate.getFullYear() + order,\n      calendarDate.getMonth(),\n      1\n    )\n  }\n\n  if (order !== 0 && view === 'years') {\n    return new Date(\n      calendarDate.getFullYear() + (12 * order),\n      calendarDate.getMonth(),\n      1\n    )\n  }\n\n  return calendarDate\n}\n\n/**\n * Formats a date based on the selection type.\n * @param date - The date to format.\n * @param selectionType - The type of selection ('day', 'week', 'month', 'year').\n * @returns A formatted date string or the original Date object.\n */\nexport const getDateBySelectionType = (date, selectionType) => {\n  if (date === null) {\n    return null\n  }\n\n  if (selectionType === 'week') {\n    return `${date.getFullYear()}W${getWeekNumber(date)}`\n  }\n\n  if (selectionType === 'month') {\n    const monthNumber = `0${date.getMonth() + 1}`.slice(-2)\n    return `${date.getFullYear()}-${monthNumber}`\n  }\n\n  if (selectionType === 'year') {\n    return `${date.getFullYear()}`\n  }\n\n  return date\n}\n\n/**\n * Retrieves the first available date within a range that is not disabled.\n * @param startDate - Start date of the range.\n * @param endDate - End date of the range.\n * @param min - Minimum allowed date.\n * @param max - Maximum allowed date.\n * @param disabledDates - Criteria for disabled dates.\n * @returns The first available Date object or null if none found.\n */\nexport const getFirstAvailableDateInRange = (\n  startDate,\n  endDate,\n  min,\n  max,\n  disabledDates\n) => {\n  const _min = min ?\n    new Date(Math.max(startDate.getTime(), min.getTime())) :\n    startDate\n  const _max = max ?\n    new Date(Math.min(endDate.getTime(), max.getTime())) :\n    endDate\n\n  if (disabledDates === undefined) {\n    return _min\n  }\n\n  for (\n    const currentDate = new Date(_min);\n    // eslint-disable-next-line no-unmodified-loop-condition\n    currentDate <= _max;\n    currentDate.setDate(currentDate.getDate() + 1)\n  ) {\n    if (!isDateDisabled(currentDate, min, max, disabledDates)) {\n      return currentDate\n    }\n  }\n\n  return null\n}\n\n/**\n * Retrieves an array of month names based on locale and format.\n * @param locale - The locale string (e.g., 'en-US').\n * @param format - The format of the month names ('short' or 'long').\n * @returns An array of month names.\n */\nexport const getMonthsNames = (locale, format = 'short') => {\n  return Array.from({ length: 12 }, (_, i) => {\n    return new Date(2000, i, 1).toLocaleString(locale, { month: format })\n  })\n}\n\n/**\n * Retrieves an array of selectable dates from the given element.\n * @param element - The HTML element to search for selectable dates.\n * @param selector - The CSS selector used to identify selectable dates. Defaults to 'tr[tabindex=\"0\"], td[tabindex=\"0\"]'.\n * @returns An array of HTMLElements representing the selectable dates.\n */\nexport const getSelectableDates = (\n  element,\n  selector = 'tr[tabindex=\"0\"], td[tabindex=\"0\"]'\n) => {\n  return [...Element.prototype.querySelectorAll.call(element, selector)]\n}\n\n/**\n * Generates an array of years centered around a given year.\n * @param year - The central year.\n * @param range - The number of years before and after the central year.\n * @returns An array of years.\n */\nexport const getYears = (year, range = 6) => {\n  return Array.from({ length: range * 2 }, (_, i) => year - range + i)\n}\n\n/**\n * Retrieves leading days (from the previous month) for a calendar view.\n * @param year - The year.\n * @param month - The month (0-11).\n * @param firstDayOfWeek - The first day of the week (0-6, where 0 is Sunday).\n * @returns An array of leading day objects.\n */\nconst getLeadingDays = (year, month, firstDayOfWeek) => {\n  // 0: sunday\n  // 1: monday\n  const dates = []\n  const d = new Date(year, month)\n  const y = d.getFullYear()\n  const m = d.getMonth()\n  const firstWeekday = new Date(y, m, 1).getDay()\n  let leadingDays = 6 - (6 - firstWeekday) - firstDayOfWeek\n\n  if (firstDayOfWeek) {\n    leadingDays = leadingDays < 0 ? 7 + leadingDays : leadingDays\n  }\n\n  for (let i = leadingDays * -1; i < 0; i++) {\n    dates.push({\n      date: new Date(y, m, i + 1),\n      month: 'previous'\n    })\n  }\n\n  return dates\n}\n\n/**\n * Retrieves all days within a specific month.\n * @param year - The year.\n * @param month - The month (0-11).\n * @returns An array of day objects.\n */\nconst getMonthDays = (year, month) => {\n  const dates = []\n  const lastDay = new Date(year, month + 1, 0).getDate()\n  for (let i = 1; i <= lastDay; i++) {\n    dates.push({\n      date: new Date(year, month, i),\n      month: 'current'\n    })\n  }\n\n  return dates\n}\n\n/**\n * Retrieves trailing days (from the next month) for a calendar view.\n * @param year - The year.\n * @param month - The month (0-11).\n * @param leadingDays - Array of leading day objects.\n * @param monthDays - Array of current month day objects.\n * @returns An array of trailing day objects.\n */\nconst getTrailingDays = (year, month, leadingDays, monthDays) => {\n  const dates = []\n  const days = 42 - (leadingDays.length + monthDays.length)\n  for (let i = 1; i <= days; i++) {\n    dates.push({\n      date: new Date(year, month + 1, i),\n      month: 'next'\n    })\n  }\n\n  return dates\n}\n\n/**\n * Calculates the ISO week number for a given date.\n * @param date - The date to calculate the week number for.\n * @returns The ISO week number.\n */\nexport const getWeekNumber = date => {\n  const tempDate = new Date(date)\n  tempDate.setHours(0, 0, 0, 0)\n\n  // Thursday in current week decides the year\n  tempDate.setDate(tempDate.getDate() + 3 - ((tempDate.getDay() + 6) % 7))\n\n  const week1 = new Date(tempDate.getFullYear(), 0, 4)\n\n  // Calculate full weeks to the date\n  const weekNumber =\n    1 + Math.round((tempDate.getTime() - week1.getTime()) / 86_400_000 / 7)\n\n  return weekNumber\n}\n\n/**\n * Retrieves detailed information about each week in a month for calendar rendering.\n * @param year - The year.\n * @param month - The month (0-11).\n * @param firstDayOfWeek - The first day of the week (0-6, where 0 is Sunday).\n * @returns An array of week objects containing week numbers and day details.\n */\nexport const getMonthDetails = (year, month, firstDayOfWeek) => {\n  const daysPrevMonth = getLeadingDays(year, month, firstDayOfWeek)\n  const daysThisMonth = getMonthDays(year, month)\n  const daysNextMonth = getTrailingDays(\n    year,\n    month,\n    daysPrevMonth,\n    daysThisMonth\n  )\n  const days = [...daysPrevMonth, ...daysThisMonth, ...daysNextMonth]\n  const weeks = []\n\n  for (const [index, day] of days.entries()) {\n    if (index % 7 === 0 || weeks.length === 0) {\n      weeks.push({\n        days: []\n      })\n    }\n\n    if ((index + 1) % 7 === 0) {\n      weeks[weeks.length - 1].weekNumber = getWeekNumber(day.date)\n    }\n\n    weeks[weeks.length - 1].days.push(day)\n  }\n\n  return weeks\n}\n\n/**\n * Checks if a date is disabled based on the 'date' period type.\n * @param date - The date to check.\n * @param min - Minimum allowed date.\n * @param max - Maximum allowed date.\n * @param disabledDates - Criteria for disabled dates.\n * @returns True if the date is disabled, false otherwise.\n */\nexport const isDateDisabled = (date, min, max, disabledDates) => {\n  if (min && date < min) {\n    return true\n  }\n\n  if (max && date > max) {\n    return true\n  }\n\n  if (disabledDates === undefined) {\n    return false\n  }\n\n  if (typeof disabledDates === 'function') {\n    return disabledDates(date)\n  }\n\n  if (disabledDates instanceof Date && isSameDateAs(date, disabledDates)) {\n    return true\n  }\n\n  if (Array.isArray(disabledDates) && disabledDates) {\n    for (const _date of disabledDates) {\n      if (typeof _date === 'function' && _date(date)) {\n        return true\n      }\n\n      if (Array.isArray(_date) && isDateInRange(date, _date[0], _date[1])) {\n        return true\n      }\n\n      if (_date instanceof Date && isSameDateAs(date, _date)) {\n        return true\n      }\n    }\n  }\n\n  return false\n}\n\n/**\n * Checks if a date is within a specified range.\n * @param date - The date to check.\n * @param start - Start date of the range.\n * @param end - End date of the range.\n * @returns True if the date is within the range, false otherwise.\n */\nexport const isDateInRange = (date, start, end) => {\n  const _date = removeTimeFromDate(date)\n  const _start = start ? removeTimeFromDate(start) : null\n  const _end = end ? removeTimeFromDate(end) : null\n\n  return Boolean(_start && _end && _start <= _date && _date <= _end)\n}\n\n/**\n * Checks if a date is selected based on start and end dates.\n * @param date - The date to check.\n * @param start - Start date.\n * @param end - End date.\n * @returns True if the date is selected, false otherwise.\n */\nexport const isDateSelected = (date, start, end) => {\n  if (start !== null && isSameDateAs(start, date)) {\n    return true\n  }\n\n  if (end !== null && isSameDateAs(end, date)) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Determines if any date within a range is disabled.\n * @param startDate - Start date of the range.\n * @param endDate - End date of the range.\n * @param disabledDates - Criteria for disabled dates.\n * @returns True if any date in the range is disabled, false otherwise.\n */\nexport const isDisableDateInRange = (startDate, endDate, disabledDates) => {\n  if (startDate && endDate) {\n    const date = new Date(startDate)\n    let disabled = false\n\n    // eslint-disable-next-line no-unmodified-loop-condition\n    while (date < endDate) {\n      date.setDate(date.getDate() + 1)\n      if (isDateDisabled(date, null, null, disabledDates)) {\n        disabled = true\n        break\n      }\n    }\n\n    return disabled\n  }\n\n  return false\n}\n\n/**\n * Checks if a month is disabled based on the 'month' period type.\n * @param date - The date representing the month to check.\n * @param min - Minimum allowed date.\n * @param max - Maximum allowed date.\n * @param disabledDates - Criteria for disabled dates.\n * @returns True if the month is disabled, false otherwise.\n */\nexport const isMonthDisabled = (date, min, max, disabledDates) => {\n  const current = (date.getFullYear() * 12) + date.getMonth()\n  const _min = min ? (min.getFullYear() * 12) + min.getMonth() : null\n  const _max = max ? (max.getFullYear() * 12) + max.getMonth() : null\n\n  if (_min && current < _min) {\n    return true\n  }\n\n  if (_max && current > _max) {\n    return true\n  }\n\n  if (disabledDates === undefined) {\n    return false\n  }\n\n  const start = min ? Math.max(date.getTime(), min.getTime()) : date\n  const end = max ?\n    Math.min(date.getTime(), max.getTime()) :\n    new Date(new Date().getFullYear(), 11, 31)\n\n  for (\n    const currentDate = new Date(start);\n    // eslint-disable-next-line no-unmodified-loop-condition\n    currentDate <= end;\n    currentDate.setDate(currentDate.getDate() + 1)\n  ) {\n    if (!isDateDisabled(currentDate, min, max, disabledDates)) {\n      return false\n    }\n  }\n\n  return false\n}\n\n/**\n * Checks if a month is selected based on start and end dates.\n * @param date - The date representing the month.\n * @param start - Start date.\n * @param end - End date.\n * @returns True if the month is selected, false otherwise.\n */\nexport const isMonthSelected = (date, start, end) => {\n  const year = date.getFullYear()\n  const month = date.getMonth()\n\n  if (\n    start !== null &&\n    year === start.getFullYear() &&\n    month === start.getMonth()\n  ) {\n    return true\n  }\n\n  if (end !== null && year === end.getFullYear() && month === end.getMonth()) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Checks if a month is within a specified range.\n * @param date - The date representing the month.\n * @param start - Start date.\n * @param end - End date.\n * @returns True if the month is within the range, false otherwise.\n */\nexport const isMonthInRange = (date, start, end) => {\n  const year = date.getFullYear()\n  const month = date.getMonth()\n  const _start = start ? (start.getFullYear() * 12) + start.getMonth() : null\n  const _end = end ? (end.getFullYear() * 12) + end.getMonth() : null\n  const _date = (year * 12) + month\n\n  return Boolean(_start && _end && _start <= _date && _date <= _end)\n}\n\n/**\n * Checks if two dates are the same calendar date.\n * @param date - First date.\n * @param date2 - Second date.\n * @returns True if both dates are the same, false otherwise.\n */\nexport const isSameDateAs = (date, date2) => {\n  if (date instanceof Date && date2 instanceof Date) {\n    return (\n      date.getDate() === date2.getDate() &&\n      date.getMonth() === date2.getMonth() &&\n      date.getFullYear() === date2.getFullYear()\n    )\n  }\n\n  if (date === null && date2 === null) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Checks if a date is today.\n * @param date - The date to check.\n * @returns True if the date is today, false otherwise.\n */\nexport const isToday = date => {\n  const today = new Date()\n  return isSameDateAs(date, today)\n}\n\n/**\n * Checks if a year is disabled based on the 'year' period type.\n * @param date - The date representing the year to check.\n * @param min - Minimum allowed date.\n * @param max - Maximum allowed date.\n * @param disabledDates - Criteria for disabled dates.\n * @returns True if the year is disabled, false otherwise.\n */\nexport const isYearDisabled = (date, min, max, disabledDates) => {\n  const year = date.getFullYear()\n  const minYear = min ? min.getFullYear() : null\n  const maxYear = max ? max.getFullYear() : null\n\n  if (minYear && year < minYear) {\n    return true\n  }\n\n  if (maxYear && year > maxYear) {\n    return true\n  }\n\n  if (disabledDates === undefined) {\n    return false\n  }\n\n  const start = min ? Math.max(date.getTime(), min.getTime()) : date\n  const end = max ?\n    Math.min(date.getTime(), max.getTime()) :\n    new Date(new Date().getFullYear(), 11, 31)\n\n  for (\n    const currentDate = new Date(start);\n    // eslint-disable-next-line no-unmodified-loop-condition\n    currentDate <= end;\n    currentDate.setDate(currentDate.getDate() + 1)\n  ) {\n    if (!isDateDisabled(currentDate, min, max, disabledDates)) {\n      return false\n    }\n  }\n\n  return false\n}\n\n/**\n * Checks if a year is selected based on start and end dates.\n * @param date - The date representing the year.\n * @param start - Start date.\n * @param end - End date.\n * @returns True if the year matches the start's or end's year, false otherwise.\n */\nexport const isYearSelected = (date, start, end) => {\n  const year = date.getFullYear()\n\n  if (start !== null && year === start.getFullYear()) {\n    return true\n  }\n\n  if (end !== null && year === end.getFullYear()) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Checks if a year is within a specified range.\n * @param date - The date representing the year.\n * @param start - Start date.\n * @param end - End date.\n * @returns True if the year's value lies between start's year and end's year, false otherwise.\n */\nexport const isYearInRange = (date, start, end) => {\n  const year = date.getFullYear()\n  const _start = start ? start.getFullYear() : null\n  const _end = end ? end.getFullYear() : null\n\n  return Boolean(_start && _end && _start <= year && year <= _end)\n}\n\n/**\n * Removes the time component from a Date object.\n * @param date - The original date.\n * @returns A new Date object with the time set to 00:00:00.\n */\nexport const removeTimeFromDate = date => {\n  const clearedDate = new Date(date)\n  clearedDate.setHours(0, 0, 0, 0)\n  return clearedDate\n}\n\n/**\n * Copies the time (hours, minutes, seconds, milliseconds) from one Date to another.\n *\n * @param {Date} target - The date whose time will be updated.\n * @param {Date} source - The date to copy the time from.\n * @returns {Date} A new Date instance with the date from `target` and time from `source`.\n */\nexport const setTimeFromDate = (target, source) => {\n  if (target === null) {\n    return null\n  }\n\n  if (!(source instanceof Date)) {\n    return target\n  }\n\n  const result = new Date(target) // create a copy to avoid mutation\n  result.setHours(\n    source.getHours(),\n    source.getMinutes(),\n    source.getSeconds(),\n    source.getMilliseconds()\n  )\n\n  return result\n}\n"],"names":["convertIsoWeekToDate","isoWeek","year","week","split","date","Date","Number","setDate","getDate","getDay","convertToDateObject","selectionType","_date","parse","userTimezoneOffset","getTimezoneOffset","getTime","createGroupsInArray","arr","numberOfGroups","perGroup","Math","ceil","length","Array","from","fill","map","_","i","slice","getCalendarDate","calendarDate","order","view","getFullYear","getMonth","getDateBySelectionType","getWeekNumber","monthNumber","getFirstAvailableDateInRange","startDate","endDate","min","max","disabledDates","_min","_max","undefined","currentDate","isDateDisabled","getMonthsNames","locale","format","toLocaleString","month","getSelectableDates","element","selector","Element","prototype","querySelectorAll","call","getYears","range","getLeadingDays","firstDayOfWeek","dates","d","y","m","firstWeekday","leadingDays","push","getMonthDays","lastDay","getTrailingDays","monthDays","days","tempDate","setHours","week1","weekNumber","round","getMonthDetails","daysPrevMonth","daysThisMonth","daysNextMonth","weeks","index","day","entries","isSameDateAs","isArray","isDateInRange","start","end","removeTimeFromDate","_start","_end","Boolean","isDateSelected","isDisableDateInRange","disabled","isMonthDisabled","current","isMonthSelected","isMonthInRange","date2","isToday","today","isYearDisabled","minYear","maxYear","isYearSelected","isYearInRange","clearedDate","setTimeFromDate","target","source","result","getHours","getMinutes","getSeconds","getMilliseconds"],"mappings":"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"}